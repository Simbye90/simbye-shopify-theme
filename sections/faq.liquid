<!-- sections/faq.liquid -->
<!-- SIMBYE FAQ SECTION - ENTERPRISE ACCORDION -->

<style>
/* CSS Variables - Enterprise FAQ System */
:root {
  --faq-bg: #ffffff;
  --faq-text: #1a1a1a;
  --faq-text-secondary: #666666;
  --faq-primary: #009a61;
  --faq-primary-hover: #00824f;
  --faq-accent: #00d97e;
  --faq-item-bg: #ffffff;
  --faq-item-hover: #fafafa;
  --faq-border: rgba(0, 0, 0, 0.06);
  --faq-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.03);
  --faq-shadow-md: 0 4px 16px rgba(0, 0, 0, 0.06);
  --faq-shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.08);
  --faq-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  --faq-gradient: linear-gradient(135deg, #f8fffe 0%, #ffffff 100%);
}

/* Dark Mode Variables */
[data-theme="dark"] {
  --faq-bg: transparent;
  --faq-text: #f5f5f5;
  --faq-text-secondary: #999999;
  --faq-primary: #00d97e;
  --faq-primary-hover: #009a61;
  --faq-accent: #00ff88;
  --faq-item-bg: rgba(26, 26, 26, 0.4);
  --faq-item-hover: rgba(26, 26, 26, 0.6);
  --faq-border: rgba(255, 255, 255, 0.05);
  --faq-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.2);
  --faq-shadow-md: 0 4px 16px rgba(0, 0, 0, 0.3);
  --faq-shadow-lg: 0 8px 24px rgba(0, 217, 126, 0.1);
  --faq-gradient: linear-gradient(135deg, rgba(0, 217, 126, 0.02) 0%, transparent 100%);
}

/* Main Section */
.faq-section {
  width: 100%;
  padding: 100px 0;
  background: var(--faq-bg);
  position: relative;
  overflow: hidden;
  transition: var(--faq-transition);
}

/* Light Mode */
[data-theme="light"] .faq-section {
  background: #ffffff;
}

/* Dark Mode - NAHTLOSER VERLAUF von Trust Section */
[data-theme="dark"] .faq-section {
  background: linear-gradient(180deg,
    #030303 0%,      /* START: Von Trust Section */
    #040504 15%,     /* Minimal heller */
    #050705 30%,     /* Leicht grünlich */
    #060806 50%,     /* Peak */
    #050705 70%,     /* Zurück */
    #040504 85%,     
    #020202 100%     /* ENDE: Fast Schwarz */
  );
}

/* Background Pattern */
.faq-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    radial-gradient(circle at 30% 80%, rgba(0, 154, 97, 0.03) 0%, transparent 50%),
    radial-gradient(circle at 70% 20%, rgba(0, 217, 126, 0.03) 0%, transparent 50%);
  pointer-events: none;
  z-index: 0;
}

/* Container */
.faq-container {
  max-width: 1440px;
  margin: 0 auto;
  padding: 0 40px;
  position: relative;
  z-index: 1;
}

/* Header */
.faq-header {
  text-align: center;
  margin-bottom: 72px;
  animation: fadeInUp 0.8s ease;
}

.faq-title {
  font-size: clamp(36px, 5vw, 56px);
  font-weight: 700;
  color: var(--faq-text);
  margin: 0 0 24px 0;
  letter-spacing: -0.02em;
  line-height: 1.1;
}

.faq-title-highlight {
  background: linear-gradient(135deg, var(--faq-primary), var(--faq-accent));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  display: inline-block;
}

.faq-subtitle {
  font-size: 20px;
  color: var(--faq-text-secondary);
  margin: 0 auto;
  max-width: 600px;
  line-height: 1.5;
}

/* Search Bar - Optional */
.faq-search {
  max-width: 600px;
  margin: 0 auto 48px;
  animation: fadeInUp 0.85s ease 0.1s both;
}

.faq-search-input {
  width: 100%;
  padding: 18px 24px 18px 56px;
  background: var(--faq-item-bg);
  border: 2px solid var(--faq-border);
  border-radius: 60px;
  font-size: 16px;
  color: var(--faq-text);
  transition: var(--faq-transition);
  position: relative;
}

[data-theme="dark"] .faq-search-input {
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.08);
}

.faq-search-wrapper {
  position: relative;
}

.faq-search-icon {
  position: absolute;
  left: 24px;
  top: 50%;
  transform: translateY(-50%);
  width: 20px;
  height: 20px;
  color: var(--faq-text-secondary);
  pointer-events: none;
}

.faq-search-input:focus {
  outline: none;
  border-color: var(--faq-primary);
  box-shadow: 0 0 0 3px rgba(0, 154, 97, 0.1);
}

[data-theme="dark"] .faq-search-input:focus {
  box-shadow: 0 0 0 3px rgba(0, 217, 126, 0.1);
}

/* Categories - Optional */
.faq-categories {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-bottom: 48px;
  flex-wrap: wrap;
  animation: fadeInUp 0.9s ease 0.15s both;
}

.faq-category {
  padding: 10px 24px;
  background: transparent;
  border: 1px solid var(--faq-border);
  border-radius: 30px;
  color: var(--faq-text-secondary);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: var(--faq-transition);
}

.faq-category:hover {
  border-color: var(--faq-primary);
  color: var(--faq-primary);
  background: rgba(0, 154, 97, 0.05);
}

.faq-category.active {
  background: var(--faq-primary);
  color: white;
  border-color: var(--faq-primary);
}

[data-theme="dark"] .faq-category {
  border-color: rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] .faq-category:hover {
  background: rgba(0, 217, 126, 0.08);
  border-color: var(--faq-primary);
}

[data-theme="dark"] .faq-category.active {
  background: var(--faq-primary);
  color: #0a0a0a;
}

/* FAQ Items Container */
.faq-items {
  max-width: 900px;
  margin: 0 auto;
}

/* FAQ Item - ENTERPRISE ACCORDION */
.faq-item {
  background: var(--faq-item-bg);
  border-radius: 16px;
  margin-bottom: 16px;
  overflow: hidden;
  transition: var(--faq-transition);
  animation: fadeInUp 0.8s ease both;
  animation-delay: calc(var(--item-index) * 50ms);
  border: 1px solid var(--faq-border);
}

[data-theme="dark"] .faq-item {
  background: rgba(26, 26, 26, 0.3);
  backdrop-filter: blur(10px);
  border-color: rgba(255, 255, 255, 0.05);
}

.faq-item:hover {
  box-shadow: var(--faq-shadow-md);
  transform: translateY(-2px);
}

.faq-item.active {
  box-shadow: var(--faq-shadow-lg);
  border-color: var(--faq-primary);
}

[data-theme="dark"] .faq-item.active {
  border-color: rgba(0, 217, 126, 0.3);
  box-shadow: 0 8px 24px rgba(0, 217, 126, 0.1);
}

/* FAQ Question */
.faq-question {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 24px 28px;
  cursor: pointer;
  user-select: none;
  transition: var(--faq-transition);
  min-height: 72px;
}

.faq-item.active .faq-question {
  background: var(--faq-gradient);
}

.faq-question-text {
  font-size: 17px;
  font-weight: 600;
  color: var(--faq-text);
  line-height: 1.4;
  flex: 1;
  padding-right: 20px;
}

/* FAQ Icon - Plus/Minus */
.faq-icon {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: rgba(0, 154, 97, 0.08);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: var(--faq-transition);
  position: relative;
}

[data-theme="dark"] .faq-icon {
  background: rgba(0, 217, 126, 0.1);
}

.faq-item.active .faq-icon {
  background: var(--faq-primary);
  transform: rotate(180deg);
}

.faq-icon::before,
.faq-icon::after {
  content: '';
  position: absolute;
  background: var(--faq-primary);
  transition: var(--faq-transition);
}

.faq-icon::before {
  width: 14px;
  height: 2px;
}

.faq-icon::after {
  width: 2px;
  height: 14px;
}

.faq-item.active .faq-icon::before,
.faq-item.active .faq-icon::after {
  background: white;
}

.faq-item.active .faq-icon::after {
  transform: rotate(90deg);
  opacity: 0;
}

/* FAQ Answer */
.faq-answer {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.faq-item.active .faq-answer {
  max-height: 500px;
}

.faq-answer-content {
  padding: 0 28px 28px 28px;
  color: var(--faq-text-secondary);
  font-size: 15px;
  line-height: 1.7;
}

.faq-answer-content ul,
.faq-answer-content ol {
  margin: 12px 0;
  padding-left: 24px;
}

.faq-answer-content li {
  margin-bottom: 8px;
}

.faq-answer-content strong {
  color: var(--faq-text);
  font-weight: 600;
}

/* Highlight in Answer */
.faq-highlight {
  background: rgba(0, 154, 97, 0.1);
  padding: 2px 6px;
  border-radius: 4px;
  color: var(--faq-primary);
  font-weight: 600;
}

[data-theme="dark"] .faq-highlight {
  background: rgba(0, 217, 126, 0.15);
  color: var(--faq-primary);
}

/* Was this helpful */
.faq-helpful {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px 28px;
  border-top: 1px solid var(--faq-border);
  background: rgba(0, 0, 0, 0.01);
}

[data-theme="dark"] .faq-helpful {
  background: rgba(255, 255, 255, 0.02);
  border-top-color: rgba(255, 255, 255, 0.05);
}

.faq-helpful-text {
  font-size: 13px;
  color: var(--faq-text-secondary);
}

.faq-helpful-buttons {
  display: flex;
  gap: 8px;
}

.faq-helpful-btn {
  padding: 6px 12px;
  background: transparent;
  border: 1px solid var(--faq-border);
  border-radius: 20px;
  font-size: 12px;
  color: var(--faq-text-secondary);
  cursor: pointer;
  transition: var(--faq-transition);
}

.faq-helpful-btn:hover {
  border-color: var(--faq-primary);
  color: var(--faq-primary);
  background: rgba(0, 154, 97, 0.05);
}

.faq-helpful-btn.active {
  background: var(--faq-primary);
  color: white;
  border-color: var(--faq-primary);
}

/* Contact CTA */
.faq-contact {
  text-align: center;
  margin-top: 72px;
  padding: 48px;
  background: var(--faq-gradient);
  border-radius: 24px;
  animation: fadeInUp 1s ease 0.3s both;
}

[data-theme="dark"] .faq-contact {
  background: linear-gradient(135deg, rgba(0, 217, 126, 0.05) 0%, rgba(0, 154, 97, 0.03) 100%);
}

.faq-contact-title {
  font-size: 28px;
  font-weight: 700;
  color: var(--faq-text);
  margin-bottom: 12px;
}

.faq-contact-text {
  font-size: 16px;
  color: var(--faq-text-secondary);
  margin-bottom: 24px;
}

.faq-contact-btn {
  display: inline-flex;
  align-items: center;
  gap: 12px;
  padding: 16px 32px;
  background: var(--faq-primary);
  color: white;
  border-radius: 30px;
  text-decoration: none;
  font-size: 16px;
  font-weight: 600;
  transition: var(--faq-transition);
  box-shadow: 0 4px 16px rgba(0, 154, 97, 0.2);
}

.faq-contact-btn:hover {
  background: var(--faq-primary-hover);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0, 154, 97, 0.3);
}

.faq-contact-btn svg {
  width: 20px;
  height: 20px;
}

/* Responsive - Tablet */
@media (max-width: 1024px) {
  .faq-container {
    padding: 0 24px;
  }
  
  .faq-items {
    max-width: 100%;
  }
}

/* Mobile Optimization */
@media (max-width: 768px) {
  .faq-section {
    padding: 72px 0;
  }
  
  .faq-container {
    padding: 0 16px;
  }
  
  .faq-header {
    margin-bottom: 48px;
  }
  
  .faq-title {
    font-size: 32px;
    margin-bottom: 16px;
  }
  
  .faq-subtitle {
    font-size: 17px;
  }
  
  .faq-search {
    margin-bottom: 32px;
  }
  
  .faq-search-input {
    padding: 16px 20px 16px 48px;
    font-size: 16px; /* Prevent zoom on iOS */
  }
  
  .faq-categories {
    gap: 8px;
    margin-bottom: 32px;
  }
  
  .faq-category {
    padding: 8px 16px;
    font-size: 13px;
  }
  
  .faq-item {
    margin-bottom: 12px;
    border-radius: 12px;
  }
  
  .faq-question {
    padding: 20px;
    min-height: auto;
  }
  
  .faq-question-text {
    font-size: 15px;
    padding-right: 12px;
  }
  
  .faq-icon {
    width: 28px;
    height: 28px;
  }
  
  .faq-answer-content {
    padding: 0 20px 20px 20px;
    font-size: 14px;
  }
  
  .faq-helpful {
    padding: 12px 20px;
  }
  
  .faq-contact {
    padding: 32px 20px;
    margin-top: 48px;
  }
  
  .faq-contact-title {
    font-size: 24px;
  }
  
  .faq-contact-text {
    font-size: 15px;
  }
  
  .faq-contact-btn {
    width: 100%;
    justify-content: center;
  }
}

/* Very Small Screens */
@media (max-width: 480px) {
  .faq-question-text {
    font-size: 14px;
  }
  
  .faq-answer-content {
    font-size: 13px;
  }
}

/* Animations */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  .faq-answer {
    transition: none;
  }
}

/* Loading State */
.faq-loading {
  text-align: center;
  padding: 60px 20px;
  color: var(--faq-text-secondary);
}

.faq-loading-spinner {
  width: 40px;
  height: 40px;
  border: 3px solid var(--faq-border);
  border-top-color: var(--faq-primary);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  margin: 0 auto 20px;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Print Styles */
@media print {
  .faq-search,
  .faq-categories,
  .faq-helpful,
  .faq-contact {
    display: none;
  }
  
  .faq-item {
    page-break-inside: avoid;
  }
  
  .faq-answer {
    max-height: none !important;
  }
}
</style>

<section class="faq-section full-width" id="faq-section">
  <div class="faq-container">
    
    <!-- Header -->
    <div class="faq-header">
      <h2 class="faq-title">
        {{ 'faq.title_part1' | t | default: 'Frequently asked' }} <span class="faq-title-highlight">{{ 'faq.title_part2' | t | default: 'questions' }}</span>
      </h2>
      <p class="faq-subtitle">
        {{ 'faq.subtitle' | t | default: 'Everything you need to know about Simbye eSIM' }}
      </p>
    </div>
    
    <!-- Optional Search -->
    <div class="faq-search">
      <div class="faq-search-wrapper">
        <svg class="faq-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"/>
          <path d="m21 21-4.35-4.35"/>
        </svg>
        <input 
          type="text" 
          class="faq-search-input" 
          placeholder="{{ 'faq.search_placeholder' | t | default: 'Search FAQs...' }}"
          id="faq-search"
        >
      </div>
    </div>
    
    <!-- Optional Categories -->
    <div class="faq-categories">
      <button class="faq-category active" data-category="all">
        {{ 'faq.category_all' | t | default: 'All' }}
      </button>
      <button class="faq-category" data-category="activation">
        {{ 'faq.category_activation' | t | default: 'Activation' }}
      </button>
      <button class="faq-category" data-category="compatibility">
        {{ 'faq.category_compatibility' | t | default: 'Compatibility' }}
      </button>
      <button class="faq-category" data-category="coverage">
        {{ 'faq.category_coverage' | t | default: 'Coverage' }}
      </button>
      <button class="faq-category" data-category="payment">
        {{ 'faq.category_payment' | t | default: 'Payment' }}
      </button>
    </div>
    
    <!-- FAQ Items -->
    <div class="faq-items" id="faq-items">
      
      <!-- FAQ 1 - Activation -->
      <div class="faq-item" data-category="activation" style="--item-index: 1">
        <div class="faq-question">
          <span class="faq-question-text">
            {{ 'faq.q1' | t | default: 'How do I activate my eSIM?' }}
          </span>
          <div class="faq-icon"></div>
        </div>
        <div class="faq-answer">
          <div class="faq-answer-content">
            {{ 'faq.a1' | t | default: 'Activating your eSIM is simple:<br><br>
            1. <strong>Check compatibility:</strong> Ensure your device is eSIM-compatible<br>
            2. <strong>Purchase eSIM:</strong> Select your destination and data plan<br>
            3. <strong>Receive QR code:</strong> Get instant delivery via email<br>
            4. <strong>Scan QR code:</strong> Go to Settings → Mobile Data → Add Data Plan<br>
            5. <strong>Activate:</strong> Turn on your eSIM line when you arrive<br><br>
            The entire process takes less than <span class="faq-highlight">2 minutes</span>!' | safe }}
          </div>
          <div class="faq-helpful">
            <span class="faq-helpful-text">{{ 'faq.helpful' | t | default: 'Was this helpful?' }}</span>
            <div class="faq-helpful-buttons">
              <button class="faq-helpful-btn" data-helpful="yes">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"/>
                </svg>
                Yes
              </button>
              <button class="faq-helpful-btn" data-helpful="no">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2h-3"/>
                </svg>
                No
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- FAQ 2 - Compatibility -->
      <div class="faq-item" data-category="compatibility" style="--item-index: 2">
        <div class="faq-question">
          <span class="faq-question-text">
            {{ 'faq.q2' | t | default: 'Is my device eSIM compatible?' }}
          </span>
          <div class="faq-icon"></div>
        </div>
        <div class="faq-answer">
          <div class="faq-answer-content">
            {{ 'faq.a2' | t | default: 'Most modern smartphones support eSIM:<br><br>
            <strong>iPhone:</strong> XS, XR, 11, 12, 13, 14, 15 and newer<br>
            <strong>Samsung:</strong> S20, S21, S22, S23, S24, Note 20, Z Flip/Fold series<br>
            <strong>Google Pixel:</strong> 3, 4, 5, 6, 7, 8 and newer<br>
            <strong>Others:</strong> Huawei P40+, Oppo Find X3+, Xiaomi 12+<br><br>
            To check: Go to Settings → About Phone → Look for "EID" or "Digital SIM"' | safe }}
          </div>
        </div>
      </div>
      
      <!-- FAQ 3 - Coverage -->
      <div class="faq-item" data-category="coverage" style="--item-index: 3">
        <div class="faq-question">
          <span class="faq-question-text">
            {{ 'faq.q3' | t | default: 'Which countries are covered?' }}
          </span>
          <div class="faq-icon"></div>
        </div>
        <div class="faq-answer">
          <div class="faq-answer-content">
            {{ 'faq.a3' | t | default: 'Simbye eSIM works in <strong>190+ countries</strong> worldwide!<br><br>
            Popular destinations include:<br>
            • Europe (all EU countries)<br>
            • USA & Canada<br>
            • Asia (Japan, Thailand, Singapore, etc.)<br>
            • Middle East (UAE, Turkey, Israel, etc.)<br>
            • Latin America (Mexico, Brazil, etc.)<br>
            • Australia & New Zealand<br><br>
            Check our full country list on the homepage!' | safe }}
          </div>
        </div>
      </div>
      
      <!-- FAQ 4 - Data -->
      <div class="faq-item" data-category="coverage" style="--item-index: 4">
        <div class="faq-question">
          <span class="faq-question-text">
            {{ 'faq.q4' | t | default: 'How much data do I need?' }}
          </span>
          <div class="faq-icon"></div>
        </div>
        <div class="faq-answer">
          <div class="faq-answer-content">
            {{ 'faq.a4' | t | default: 'Average daily usage:<br><br>
            <strong>Light User (500MB/day):</strong><br>
            • WhatsApp & messaging<br>
            • Email checking<br>
            • Light browsing<br><br>
            <strong>Normal User (1-2GB/day):</strong><br>
            • Social media with photos<br>
            • Maps & navigation<br>
            • Music streaming<br><br>
            <strong>Heavy User (3GB+/day):</strong><br>
            • Video streaming<br>
            • Video calls<br>
            • Heavy social media use' | safe }}
          </div>
        </div>
      </div>
      
      <!-- FAQ 5 - Speed -->
      <div class="faq-item" data-category="coverage" style="--item-index: 5">
        <div class="faq-question">
          <span class="faq-question-text">
            {{ 'faq.q5' | t | default: 'What internet speeds can I expect?' }}
          </span>
          <div class="faq-icon"></div>
        </div>
        <div class="faq-answer">
          <div class="faq-answer-content">
            {{ 'faq.a5' | t | default: 'You get <strong>real local speeds</strong> with no throttling!<br><br>
            • 5G networks where available (up to 1 Gbps)<br>
            • 4G LTE in most areas (20-150 Mbps)<br>
            • 3G fallback in remote areas<br><br>
            We partner with premium local carriers in each country to ensure the best possible speeds. Most users experience speeds identical to local SIM cards!' | safe }}
          </div>
        </div>
      </div>
      
      <!-- FAQ 6 - Top Up -->
      <div class="faq-item" data-category="payment" style="--item-index: 6">
        <div class="faq-question">
          <span class="faq-question-text">
            {{ 'faq.q6' | t | default: 'Can I top up my eSIM?' }}
          </span>
          <div class="faq-icon"></div>
        </div>
        <div class="faq-answer">
          <div class="faq-answer-content">
            {{ 'faq.a6' | t | default: 'Yes! All Simbye eSIMs are <strong>rechargeable</strong>:<br><br>
            • Top up anytime through our website<br>
            • Keep the same eSIM for multiple trips<br>
            • No need to scan new QR codes<br>
            • Instant activation of additional data<br>
            • Volume discounts for larger packages<br><br>
            Simply log into your account and click "Top Up" on your active eSIM!' | safe }}
          </div>
        </div>
      </div>
      
      <!-- FAQ 7 - Validity -->
      <div class="faq-item" data-category="activation" style="--item-index: 7">
        <div class="faq-question">
          <span class="faq-question-text">
            {{ 'faq.q7' | t | default: 'When does my eSIM validity start?' }}
          </span>
          <div class="faq-icon"></div>
        </div>
        <div class="faq-answer">
          <div class="faq-answer-content">
            {{ 'faq.a7' | t | default: 'Your eSIM validity starts <strong>when you activate it</strong>, not when you purchase!<br><br>
            • Purchase anytime before your trip<br>
            • Install the eSIM at home (WiFi required)<br>
            • Activate when you arrive at destination<br>
            • Validity period starts from first use<br><br>
            You have 90 days after purchase to activate your eSIM.' | safe }}
          </div>
        </div>
      </div>
      
      <!-- FAQ 8 - Roaming -->
      <div class="faq-item" data-category="coverage" style="--item-index: 8">
        <div class="faq-question">
          <span class="faq-question-text">
            {{ 'faq.q8' | t | default: 'Are there any roaming charges?' }}
          </span>
          <div class="faq-icon"></div>
        </div>
        <div class="faq-answer">
          <div class="faq-answer-content">
            {{ 'faq.a8' | t | default: '<strong>No roaming charges ever!</strong><br><br>
            • Fixed price regardless of usage<br>
            • No hidden fees or surprises<br>
            • No bill shock when you return home<br>
            • Data only - no voice/SMS charges<br>
            • Use WhatsApp, Skype, etc. for calls<br><br>
            The price you see is the price you pay. Period.' | safe }}
          </div>
        </div>
      </div>
      
      <!-- FAQ 9 - Phone Number -->
      <div class="faq-item" data-category="activation" style="--item-index: 9">
        <div class="faq-question">
          <span class="faq-question-text">
            {{ 'faq.q9' | t | default: 'Do I keep my phone number?' }}
          </span>
          <div class="faq-icon"></div>
        </div>
        <div class="faq-answer">
          <div class="faq-answer-content">
            {{ 'faq.a9' | t | default: 'Yes! Your primary number stays active:<br><br>
            • eSIM is data-only (no new phone number)<br>
            • Keep receiving calls/SMS on your number<br>
            • Use WhatsApp with your regular number<br>
            • Dual SIM functionality on most phones<br>
            • Switch between lines easily<br><br>
            Pro tip: Turn off data roaming on your primary SIM to avoid charges!' | safe }}
          </div>
        </div>
      </div>
      
      <!-- FAQ 10 - Support -->
      <div class="faq-item" data-category="activation" style="--item-index: 10">
        <div class="faq-question">
          <span class="faq-question-text">
            {{ 'faq.q10' | t | default: 'What if I need help?' }}
          </span>
          <div class="faq-icon"></div>
        </div>
        <div class="faq-answer">
          <div class="faq-answer-content">
            {{ 'faq.a10' | t | default: 'We offer <strong>24/7 premium support</strong>:<br><br>
            • Live chat on website (instant response)<br>
            • WhatsApp support: +XX XXX XXXX<br>
            • Email: support@simbye.com<br>
            • Average response time: <60 seconds<br>
            • Support in 12 languages<br>
            • Video call assistance available<br><br>
            Our team is always ready to help you!' | safe }}
          </div>
        </div>
      </div>
      
      <!-- FAQ 11 - Refund -->
      <div class="faq-item" data-category="payment" style="--item-index: 11">
        <div class="faq-question">
          <span class="faq-question-text">
            {{ 'faq.q11' | t | default: 'What is your refund policy?' }}
          </span>
          <div class="faq-icon"></div>
        </div>
        <div class="faq-answer">
          <div class="faq-answer-content">
            {{ 'faq.a11' | t | default: 'We offer a <strong>30-day money-back guarantee</strong>:<br><br>
            • Full refund if not activated<br>
            • Pro-rata refund for unused data<br>
            • No questions asked policy<br>
            • Refund within 24-48 hours<br>
            • Contact support for instant processing<br><br>
            Your satisfaction is our priority!' | safe }}
          </div>
        </div>
      </div>
      
      <!-- FAQ 12 - Business -->
      <div class="faq-item" data-category="payment" style="--item-index: 12">
        <div class="faq-question">
          <span class="faq-question-text">
            {{ 'faq.q12' | t | default: 'Do you offer business plans?' }}
          </span>
          <div class="faq-icon"></div>
        </div>
        <div class="faq-answer">
          <div class="faq-answer-content">
            {{ 'faq.a12' | t | default: 'Yes! Special benefits for businesses:<br><br>
            • Volume discounts (10-50% off)<br>
            • Centralized account management<br>
            • Monthly invoicing available<br>
            • Dedicated account manager<br>
            • Custom data packages<br>
            • API integration available<br><br>
            Contact business@simbye.com for details!' | safe }}
          </div>
        </div>
      </div>
      
    </div>
    
    <!-- Contact CTA -->
    <div class="faq-contact">
      <h3 class="faq-contact-title">
        {{ 'faq.contact_title' | t | default: 'Still have questions?' }}
      </h3>
      <p class="faq-contact-text">
        {{ 'faq.contact_text' | t | default: 'Our support team is available 24/7 to help you' }}
      </p>
      <a href="/pages/contact" class="faq-contact-btn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/>
        </svg>
        {{ 'faq.contact_button' | t | default: 'Contact Support' }}
      </a>
    </div>
    
  </div>
</section>

<!-- Schema.org FAQ Markup for SEO -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "How do I activate my eSIM?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Activating your eSIM is simple: 1. Check compatibility, 2. Purchase eSIM, 3. Receive QR code via email, 4. Scan QR code in Settings, 5. Activate when you arrive. The entire process takes less than 2 minutes!"
      }
    },
    {
      "@type": "Question",
      "name": "Is my device eSIM compatible?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Most modern smartphones support eSIM including iPhone XS and newer, Samsung S20 and newer, Google Pixel 3 and newer. Check Settings → About Phone for EID or Digital SIM."
      }
    },
    {
      "@type": "Question",
      "name": "Which countries are covered?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Simbye eSIM works in 190+ countries worldwide including Europe, USA & Canada, Asia, Middle East, Latin America, and Australia & New Zealand."
      }
    }
  ]
}
</script>

<script>
(function() {
  'use strict';
  
  // Cache DOM elements
  const section = document.getElementById('faq-section');
  const items = document.querySelectorAll('.faq-item');
  const searchInput = document.getElementById('faq-search');
  const categories = document.querySelectorAll('.faq-category');
  const helpfulBtns = document.querySelectorAll('.faq-helpful-btn');
  
  // State
  let activeItem = null;
  let activeCategory = 'all';
  
  // Initialize
  function init() {
    if (!section) return;
    
    // Bind events
    bindEvents();
    
    // Set initial state
    updateDisplay();
  }
  
  // Bind events
  function bindEvents() {
    // FAQ Items - Click to expand/collapse
    items.forEach(item => {
      const question = item.querySelector('.faq-question');
      if (question) {
        question.addEventListener('click', () => toggleItem(item));
        
        // Keyboard support
        question.setAttribute('tabindex', '0');
        question.setAttribute('role', 'button');
        question.setAttribute('aria-expanded', 'false');
        
        question.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            toggleItem(item);
          }
        });
      }
    });
    
    // Categories
    categories.forEach(category => {
      category.addEventListener('click', () => {
        setActiveCategory(category.dataset.category);
        updateCategoryButtons(category);
      });
    });
    
    // Search
    if (searchInput) {
      let searchTimeout;
      searchInput.addEventListener('input', () => {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(() => {
          performSearch(searchInput.value);
        }, 300);
      });
    }
    
    // Helpful buttons
    helpfulBtns.forEach(btn => {
      btn.addEventListener('click', function() {
        const helpful = this.dataset.helpful;
        handleHelpful(this, helpful);
      });
    });
    
    // Hash navigation (deep linking)
    if (window.location.hash) {
      const targetId = window.location.hash.slice(1);
      const targetItem = document.querySelector(`[data-faq-id="${targetId}"]`);
      if (targetItem) {
        setTimeout(() => {
          toggleItem(targetItem, true);
          targetItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }, 500);
      }
    }
  }
  
  // Toggle FAQ item
  function toggleItem(item, forceOpen = false) {
    const isActive = item.classList.contains('active');
    const question = item.querySelector('.faq-question');
    const answer = item.querySelector('.faq-answer');
    
    if (!forceOpen && isActive) {
      // Close
      item.classList.remove('active');
      question.setAttribute('aria-expanded', 'false');
    } else {
      // Close others (single-open mode)
      if (activeItem && activeItem !== item) {
        activeItem.classList.remove('active');
        activeItem.querySelector('.faq-question').setAttribute('aria-expanded', 'false');
      }
      
      // Open this one
      item.classList.add('active');
      question.setAttribute('aria-expanded', 'true');
      activeItem = item;
      
      // Smooth scroll into view on mobile
      if (window.innerWidth <= 768) {
        setTimeout(() => {
          item.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }, 300);
      }
    }
  }
  
  // Set active category
  function setActiveCategory(category) {
    activeCategory = category;
    updateDisplay();
  }
  
  // Update category buttons
  function updateCategoryButtons(activeBtn) {
    categories.forEach(btn => {
      btn.classList.remove('active');
    });
    activeBtn.classList.add('active');
  }
  
  // Update display based on category
  function updateDisplay() {
    items.forEach(item => {
      const itemCategory = item.dataset.category;
      if (activeCategory === 'all' || itemCategory === activeCategory) {
        item.style.display = 'block';
        setTimeout(() => {
          item.style.opacity = '1';
          item.style.transform = 'translateY(0)';
        }, 10);
      } else {
        item.style.opacity = '0';
        item.style.transform = 'translateY(20px)';
        setTimeout(() => {
          item.style.display = 'none';
        }, 300);
      }
    });
  }
  
  // Search functionality
  function performSearch(query) {
    const searchTerm = query.toLowerCase().trim();
    
    if (!searchTerm) {
      // Show all in current category
      updateDisplay();
      return;
    }
    
    items.forEach(item => {
      const questionText = item.querySelector('.faq-question-text').textContent.toLowerCase();
      const answerText = item.querySelector('.faq-answer-content').textContent.toLowerCase();
      
      if (questionText.includes(searchTerm) || answerText.includes(searchTerm)) {
        item.style.display = 'block';
        item.style.opacity = '1';
        item.style.transform = 'translateY(0)';
        
        // Highlight search term
        highlightTerm(item, searchTerm);
      } else {
        item.style.opacity = '0';
        item.style.transform = 'translateY(20px)';
        setTimeout(() => {
          item.style.display = 'none';
        }, 300);
      }
    });
  }
  
  // Highlight search term
  function highlightTerm(item, term) {
    // Remove existing highlights
    const existingHighlights = item.querySelectorAll('.search-highlight');
    existingHighlights.forEach(el => {
      el.outerHTML = el.innerHTML;
    });
    
    // Add new highlights (simplified for demo)
    // In production, use a proper text highlighting library
  }
  
  // Handle helpful feedback
  function handleHelpful(btn, value) {
    const parent = btn.closest('.faq-helpful');
    const buttons = parent.querySelectorAll('.faq-helpful-btn');
    
    // Remove active from all
    buttons.forEach(b => b.classList.remove('active'));
    
    // Add active to clicked
    btn.classList.add('active');
    
    // Analytics tracking (if available)
    if (typeof gtag !== 'undefined') {
      gtag('event', 'faq_helpful', {
        'faq_question': btn.closest('.faq-item').querySelector('.faq-question-text').textContent,
        'helpful': value
      });
    }
    
    // Show thank you (optional)
    const thankYou = document.createElement('span');
    thankYou.className = 'faq-thank-you';
    thankYou.textContent = 'Thanks for your feedback!';
    thankYou.style.cssText = 'margin-left: 12px; color: var(--faq-primary); font-size: 13px;';
    parent.appendChild(thankYou);
    
    setTimeout(() => {
      thankYou.style.opacity = '0';
      setTimeout(() => thankYou.remove(), 300);
    }, 2000);
  }
  
  // Keyboard navigation
  document.addEventListener('keydown', (e) => {
    if (!section.contains(document.activeElement)) return;
    
    const currentItem = document.activeElement.closest('.faq-item');
    if (!currentItem) return;
    
    let nextItem;
    
    switch(e.key) {
      case 'ArrowDown':
        e.preventDefault();
        nextItem = currentItem.nextElementSibling;
        if (nextItem && nextItem.classList.contains('faq-item')) {
          nextItem.querySelector('.faq-question').focus();
        }
        break;
        
      case 'ArrowUp':
        e.preventDefault();
        nextItem = currentItem.previousElementSibling;
        if (nextItem && nextItem.classList.contains('faq-item')) {
          nextItem.querySelector('.faq-question').focus();
        }
        break;
    }
  });
  
  // Initialize on DOM ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>

{% schema %}
{
  "name": "FAQ Section",
  "class": "faq-section",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_search",
      "label": "Show search bar",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_categories",
      "label": "Show categories",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_helpful",
      "label": "Show helpful buttons",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_contact",
      "label": "Show contact CTA",
      "default": true
    },
    {
      "type": "select",
      "id": "expand_mode",
      "label": "Expand mode",
      "options": [
        { "value": "single", "label": "Single (one at a time)" },
        { "value": "multiple", "label": "Multiple (independent)" }
      ],
      "default": "single"
    }
  ],
  "blocks": [
    {
      "name": "FAQ Item",
      "type": "faq",
      "settings": [
        {
          "type": "text",
          "id": "question",
          "label": "Question",
          "default": "How do I activate my eSIM?"
        },
        {
          "type": "richtext",
          "id": "answer",
          "label": "Answer",
          "default": "<p>Answer text goes here...</p>"
        },
        {
          "type": "select",
          "id": "category",
          "label": "Category",
          "options": [
            { "value": "activation", "label": "Activation" },
            { "value": "compatibility", "label": "Compatibility" },
            { "value": "coverage", "label": "Coverage" },
            { "value": "payment", "label": "Payment" }
          ],
          "default": "activation"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "FAQ Section"
    }
  ]
}
{% endschema %}