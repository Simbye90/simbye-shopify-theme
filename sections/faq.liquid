<!-- sections/faq-premium.liquid -->
<section class="faq-premium full-width" id="faq-{{ section.id }}" data-section-id="{{ section.id }}">
  <div class="faq-wrapper">
    <!-- Animated Background -->
    <div class="faq-bg-gradient"></div>
    
    <!-- Header - How-To Style mit Highlight -->
    <div class="faq-header" data-aos="fade-up">
      <h2 class="faq-title">
        {{ section.settings.title_part1 | default: 'Your' }}
        <span class="faq-title-highlight">{{ section.settings.title_part2 | default: 'Questions' }}</span>
        {{ section.settings.title_part3 | default: 'Answered' }}
      </h2>
      <p class="faq-subtitle">{{ section.settings.subtitle | default: 'Everything you need to know about Simbye eSIM' }}</p>
    </div>

    <!-- FAQ Accordion Container -->
    <div class="faq-accordion" role="list">
      {% for block in section.blocks %}
        {% if block.type == 'faq_item' %}
          <div class="faq-item" 
               data-faq-index="{{ forloop.index }}"
               data-aos="fade-up"
               data-aos-delay="{{ forloop.index | times: 30 }}"
               {{ block.shopify_attributes }}>
            
            <!-- Question -->
            <button class="faq-question" 
                    aria-expanded="false"
                    aria-controls="faq-answer-{{ block.id }}"
                    data-faq-trigger>
              
              <!-- Question Text -->
              <span class="faq-question-text">{{ block.settings.question }}</span>
              
              <!-- Plus/Minus Icon -->
              <span class="faq-icon">
                <svg class="icon-plus" width="28" height="28" viewBox="0 0 24 24" fill="none">
                  <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
                </svg>
                <svg class="icon-minus" width="28" height="28" viewBox="0 0 24 24" fill="none">
                  <path d="M5 12h14" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
                </svg>
              </span>
            </button>
            
            <!-- Answer -->
            <div class="faq-answer" 
                 id="faq-answer-{{ block.id }}"
                 aria-hidden="true">
              <div class="faq-answer-inner">
                <div class="answer-content">
                  {{ block.settings.answer }}
                </div>
                
                {% if block.settings.show_cta %}
                  <a href="{{ block.settings.cta_link }}" class="answer-cta">
                    {{ block.settings.cta_text | default: 'Learn More' }}
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                      <path d="M5 12h14m-7-7l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </a>
                {% endif %}
              </div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <!-- 24/7 Support Text -->
    {% if section.settings.show_support_cta %}
      <div class="faq-support-text" data-aos="fade-up">
        <p class="support-message">
          <span class="support-icon">ðŸ’¬</span>
          {{ section.settings.support_text | default: 'Noch Fragen? Schreib uns im Chat - wir antworten in unter 60 Sekunden!' }}
        </p>
      </div>
    {% endif %}
  </div>
</section>

<style>
/* FORCE FULL WIDTH - Override Shopify Grid */
.shopify-section:has(.faq-premium) {
  padding: 0 !important;
  margin: 0 !important;
  max-width: 100% !important;
  width: 100% !important;
}

.faq-premium {
  width: 100vw !important;
  position: relative;
  left: 50%;
  right: 50%;
  margin-left: -50vw !important;
  margin-right: -50vw !important;
}

/* Variables */
.faq-premium {
  --faq-primary: #009a61;
  --faq-primary-hover: #00824f;
  --faq-accent: #00d97e;
  --faq-text: #1a1a1a;
  --faq-text-secondary: #666;
  --faq-bg: #ffffff;
  --faq-card-bg: #ffffff;
  --faq-border: rgba(0, 0, 0, 0.08);
  --faq-shadow: 0 12px 48px rgba(0, 154, 97, 0.1);
  --faq-radius: 24px;
  --faq-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Dark Mode Variables */
[data-theme="dark"] .faq-premium {
  --faq-text: #ffffff;
  --faq-text-secondary: #b0b0b0;
  --faq-bg: #040404;
  --faq-card-bg: rgba(255, 255, 255, 0.03);
  --faq-border: rgba(255, 255, 255, 0.1);
  --faq-shadow: 0 12px 48px rgba(0, 217, 126, 0.15);
  --faq-primary: #00d97e;
  --faq-primary-hover: #00c571;
}

/* Section Base */
.faq-premium {
  position: relative;
  padding: 100px 0;
  background: var(--faq-bg);
  overflow: hidden;
}

/* Animated Background */
.faq-bg-gradient {
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle at 20% 50%, rgba(0, 154, 97, 0.04) 0%, transparent 50%),
              radial-gradient(circle at 80% 50%, rgba(0, 217, 126, 0.04) 0%, transparent 50%);
  animation: faqGradientFloat 20s ease-in-out infinite;
  pointer-events: none;
}

@keyframes faqGradientFloat {
  0%, 100% { transform: translate(0, 0) scale(1); }
  50% { transform: translate(-30px, 30px) scale(1.05); }
}

/* Wrapper - FULL WIDTH 100% */
.faq-wrapper {
  position: relative;
  width: 100%;
  max-width: 1440px;
  margin: 0 auto;
  padding: 0 40px;
}

/* Header - How-To Style */
.faq-header {
  text-align: center;
  margin-bottom: 80px;
}

.faq-title {
  font-size: clamp(36px, 5vw, 56px);
  font-weight: 700;
  line-height: 1.1;
  margin: 0 0 20px;
  letter-spacing: -0.02em;
  color: var(--faq-text);
}

/* Highlight Box wie in How-To */
.faq-title-highlight {
  background: var(--faq-primary);
  color: white;
  padding: 4px 20px;
  border-radius: 12px;
  display: inline-block;
  margin: 0 8px;
}

[data-theme="dark"] .faq-title-highlight {
  background: var(--faq-primary);
  color: #fff;
}

.faq-subtitle {
  font-size: 20px;
  color: var(--faq-text-secondary);
  margin: 0;
  max-width: 600px;
  margin: 0 auto;
}

/* Accordion Container - FULL WIDTH */
.faq-accordion {
  display: grid;
  gap: 20px;
  width: 100%;
}

/* FAQ Item - BIGGER & BETTER */
.faq-item {
  background: var(--faq-card-bg);
  border: 1px solid var(--faq-border);
  border-radius: var(--faq-radius);
  overflow: hidden;
  transition: var(--faq-transition);
  transform: translateZ(0);
  backdrop-filter: blur(10px);
}

.faq-item:hover {
  transform: translateY(-4px);
  box-shadow: var(--faq-shadow);
  border-color: var(--faq-primary);
}

.faq-item.active {
  background: linear-gradient(135deg, 
    rgba(0, 154, 97, 0.03) 0%, 
    rgba(0, 217, 126, 0.03) 100%);
  border-color: var(--faq-primary);
  box-shadow: var(--faq-shadow);
  transform: scale(1.02);
}

/* Question Button - BIGGER */
.faq-question {
  position: relative;
  width: 100%;
  padding: 32px 40px;
  background: none;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 24px;
  text-align: left;
  transition: var(--faq-transition);
  font-family: inherit;
}

.faq-question:hover {
  padding-left: 48px;
  background: rgba(0, 154, 97, 0.02);
}

/* Question Text - BIGGER */
.faq-question-text {
  flex: 1;
  font-size: 22px;
  font-weight: 600;
  color: var(--faq-text);
  line-height: 1.4;
  letter-spacing: -0.01em;
}

/* Icon - BIGGER */
.faq-icon {
  position: relative;
  width: 28px;
  height: 28px;
  flex-shrink: 0;
  color: var(--faq-primary);
}

.faq-icon svg {
  position: absolute;
  top: 0;
  left: 0;
  transition: var(--faq-transition);
}

.icon-minus {
  opacity: 0;
  transform: rotate(-90deg);
}

.faq-item.active .icon-plus {
  opacity: 0;
  transform: rotate(90deg);
}

.faq-item.active .icon-minus {
  opacity: 1;
  transform: rotate(0);
}

/* Answer - BIGGER TEXT */
.faq-answer {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.faq-answer-inner {
  padding: 0 40px 32px 40px;
}

.answer-content {
  font-size: 18px;
  line-height: 1.8;
  color: var(--faq-text-secondary);
}

.answer-content p {
  margin: 0 0 16px;
}

.answer-content p:last-child {
  margin: 0;
}

/* Answer CTA */
.answer-cta {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  margin-top: 20px;
  padding: 12px 24px;
  background: var(--faq-primary);
  color: white;
  font-size: 16px;
  font-weight: 600;
  text-decoration: none;
  border-radius: 100px;
  transition: var(--faq-transition);
}

.answer-cta:hover {
  background: var(--faq-primary-hover);
  transform: translateX(4px);
  box-shadow: 0 8px 24px rgba(0, 154, 97, 0.3);
}

/* Mobile Styles */
@media (max-width: 768px) {
  .faq-premium {
    padding: 60px 0;
  }
  
  .faq-wrapper {
    padding: 0 20px;
  }
  
  .faq-header {
    margin-bottom: 48px;
  }
  
  .faq-title {
    font-size: 32px;
    margin-bottom: 16px;
  }
  
  .faq-title-highlight {
    padding: 2px 16px;
    font-size: 32px;
  }
  
  .faq-subtitle {
    font-size: 16px;
  }
  
  .faq-accordion {
    gap: 12px;
  }
  
  .faq-question {
    padding: 24px 20px;
  }
  
  .faq-question:hover {
    padding-left: 24px;
  }
  
  .faq-question-text {
    font-size: 18px;
  }
  
  .faq-answer-inner {
    padding: 0 20px 24px 20px;
  }
  
  .answer-content {
    font-size: 15px;
    line-height: 1.6;
  }
  
  .faq-support-text {
    margin-top: 40px;
  }
  
  .support-message {
    font-size: 15px;
  }
}

/* Tablet */
@media (min-width: 769px) and (max-width: 1024px) {
  .faq-wrapper {
    padding: 0 32px;
  }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  .faq-premium *,
  .faq-premium *::before,
  .faq-premium *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
</style>

<script>
(function() {
  'use strict';
  
  const section = document.querySelector('#faq-{{ section.id }}');
  if (!section) return;
  
  const faqItems = section.querySelectorAll('.faq-item');
  const faqTriggers = section.querySelectorAll('[data-faq-trigger]');
  
  // Initialize
  function init() {
    // Add click handlers
    faqTriggers.forEach(trigger => {
      trigger.addEventListener('click', handleFaqClick);
    });
    
    // Keyboard navigation
    section.addEventListener('keydown', handleKeyboard);
    
    // Initialize AOS if available
    if (typeof AOS !== 'undefined') {
      AOS.init({
        duration: 600,
        once: true,
        offset: 50
      });
    }
  }
  
  // Handle FAQ click
  function handleFaqClick(e) {
    e.preventDefault();
    const trigger = e.currentTarget;
    const faqItem = trigger.closest('.faq-item');
    const answer = faqItem.querySelector('.faq-answer');
    const isOpen = faqItem.classList.contains('active');
    
    // Close all other FAQs
    faqItems.forEach(item => {
      if (item !== faqItem && item.classList.contains('active')) {
        closeItem(item);
      }
    });
    
    // Toggle current FAQ
    if (isOpen) {
      closeItem(faqItem);
    } else {
      openItem(faqItem);
    }
  }
  
  // Open item with smooth animation
  function openItem(item) {
    const trigger = item.querySelector('[data-faq-trigger]');
    const answer = item.querySelector('.faq-answer');
    const content = answer.querySelector('.faq-answer-inner');
    
    item.classList.add('active');
    trigger.setAttribute('aria-expanded', 'true');
    answer.setAttribute('aria-hidden', 'false');
    answer.style.maxHeight = content.scrollHeight + 'px';
  }
  
  // Close item
  function closeItem(item) {
    const trigger = item.querySelector('[data-faq-trigger]');
    const answer = item.querySelector('.faq-answer');
    
    item.classList.remove('active');
    trigger.setAttribute('aria-expanded', 'false');
    answer.setAttribute('aria-hidden', 'true');
    answer.style.maxHeight = '0';
  }
  
  // Keyboard navigation
  function handleKeyboard(e) {
    const target = e.target;
    if (!target.hasAttribute('data-faq-trigger')) return;
    
    const currentItem = target.closest('.faq-item');
    const currentIndex = Array.from(faqItems).indexOf(currentItem);
    let nextIndex = currentIndex;
    
    switch(e.key) {
      case 'ArrowDown':
        e.preventDefault();
        nextIndex = currentIndex < faqItems.length - 1 ? currentIndex + 1 : 0;
        break;
      case 'ArrowUp':
        e.preventDefault();
        nextIndex = currentIndex > 0 ? currentIndex - 1 : faqItems.length - 1;
        break;
      case 'Home':
        e.preventDefault();
        nextIndex = 0;
        break;
      case 'End':
        e.preventDefault();
        nextIndex = faqItems.length - 1;
        break;
      default:
        return;
    }
    
    const nextTrigger = faqItems[nextIndex].querySelector('[data-faq-trigger]');
    nextTrigger.focus();
  }
  
  // Initialize on DOM ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>

{% schema %}
{
  "name": "FAQ Premium",
  "class": "faq-premium-section",
  "settings": [
    {
      "type": "text",
      "id": "title_part1",
      "label": "Title (Part 1)",
      "default": "Your"
    },
    {
      "type": "text",
      "id": "title_part2",
      "label": "Title (Part 2 - Highlighted)",
      "default": "Questions"
    },
    {
      "type": "text",
      "id": "title_part3",
      "label": "Title (Part 3)",
      "default": "Answered"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Everything you need to know about Simbye eSIM"
    }
  ],
  "blocks": [
    {
      "type": "faq_item",
      "name": "FAQ Item",
      "settings": [
        {
          "type": "text",
          "id": "question",
          "label": "Question",
          "default": "Can my phone use eSIM?"
        },
        {
          "type": "richtext",
          "id": "answer",
          "label": "Answer",
          "default": "<p>Most modern smartphones from 2018 onwards support eSIM technology. This includes iPhone XS and newer, Samsung Galaxy S20 and newer, Google Pixel 3 and newer, and many more devices. You can check your device compatibility on our website.</p>"
        },
        {
          "type": "checkbox",
          "id": "show_cta",
          "label": "Show CTA Button",
          "default": false
        },
        {
          "type": "text",
          "id": "cta_text",
          "label": "CTA Text",
          "default": "Learn More"
        },
        {
          "type": "url",
          "id": "cta_link",
          "label": "CTA Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "FAQ Premium",
      "blocks": [
        {
          "type": "faq_item",
          "settings": {
            "question": "Can my phone use eSIM?",
            "answer": "<p>Most modern smartphones from 2018 onwards support eSIM technology. This includes iPhone XS and newer, Samsung Galaxy S20 and newer, Google Pixel 3 and newer. Check our compatibility list to confirm your device.</p>",
            "show_cta": true,
            "cta_text": "Check Compatibility",
            "cta_link": "/pages/check-esim"
          }
        },
        {
          "type": "faq_item",
          "settings": {
            "question": "How fast will I receive my eSIM?",
            "answer": "<p>Your eSIM QR code is delivered instantly via email after payment confirmation. The entire process from order to activation takes less than 2 minutes. No waiting, no shipping - immediate connectivity!</p>"
          }
        },
        {
          "type": "faq_item",
          "settings": {
            "question": "Can I reuse my eSIM or top it up?",
            "answer": "<p>Yes! Simbye eSIMs are fully rechargeable. You can top up your data anytime through your account dashboard. No need to buy a new eSIM - just add more data when needed. Your eSIM stays active as long as you use it at least once every 180 days.</p>"
          }
        },
        {
          "type": "faq_item",
          "settings": {
            "question": "What happens when my data runs out?",
            "answer": "<p>When your data is depleted, the eSIM simply stops working - no surprise charges or roaming fees! You'll receive notifications at 50%, 80%, and 95% usage. You can top up instantly through our app or website to continue using your eSIM.</p>"
          }
        },
        {
          "type": "faq_item",
          "settings": {
            "question": "Does the eSIM work for WhatsApp calls and video?",
            "answer": "<p>Absolutely! Our eSIMs provide full internet connectivity, perfect for WhatsApp, FaceTime, Skype, Zoom, and all other VoIP services. You can make calls, send messages, and video chat just like with your regular data connection.</p>"
          }
        },
        {
          "type": "faq_item",
          "settings": {
            "question": "Can I use multiple eSIMs at the same time?",
            "answer": "<p>Yes, most eSIM-compatible phones support multiple eSIM profiles. You can store 5-10 different eSIMs and switch between them as needed. However, typically only one eSIM can be active for data at a time (alongside your physical SIM).</p>"
          }
        },
        {
          "type": "faq_item",
          "settings": {
            "question": "Is there any speed throttling?",
            "answer": "<p>No throttling whatsoever! You get full 4G/5G speeds up to 1 Gbit/s depending on local network capabilities. We partner with premium tier-1 carriers to ensure you get the same speeds as local customers. Unlimited plans have no fair use policy.</p>"
          }
        },
        {
          "type": "faq_item",
          "settings": {
            "question": "How can I check my data usage?",
            "answer": "<p>Track your usage in real-time through: 1) Your phone's settings menu, 2) Our Simbye app with live statistics, 3) Email notifications at usage milestones, or 4) Your account dashboard on our website. You'll always know exactly how much data you have left.</p>"
          }
        }
      ]
    }
  ]
}
{% endschema %}