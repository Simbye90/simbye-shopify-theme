<!-- sections/faq-premium.liquid -->
<section class="faq-premium" id="faq-{{ section.id }}" data-section-id="{{ section.id }}">
  <div class="faq-container">
    
    <!-- Header -->
    <div class="faq-header">
      <h2 class="faq-title">
        <span class="title-line1">{{ section.settings.title_line1 | default: 'Häufig gestellte' }}</span>
        <span class="title-line2">{{ section.settings.title_line2 | default: 'Fragen' }}</span>
      </h2>
      <p class="faq-subtitle">{{ section.settings.subtitle | default: 'Alles was du über Simbye eSIM wissen musst' }}</p>
    </div>

    <!-- FAQ Grid -->
    <div class="faq-grid">
      {% for block in section.blocks %}
        {% if block.type == 'faq_item' %}
          <div class="faq-card" 
               data-tilt
               data-tilt-max="3"
               data-tilt-speed="400"
               data-tilt-perspective="1000"
               {{ block.shopify_attributes }}>
            
            <button class="faq-trigger" 
                    aria-expanded="false"
                    aria-controls="answer-{{ block.id }}">
              
              <!-- Question Header -->
              <div class="faq-header-content">
                <span class="faq-index">
                  {% if forloop.index < 10 %}0{% endif %}{{ forloop.index }}
                </span>
                <h3 class="faq-question">{{ block.settings.question }}</h3>
                <span class="faq-toggle">
                  <span class="toggle-line horizontal"></span>
                  <span class="toggle-line vertical"></span>
                </span>
              </div>
            </button>
            
            <!-- Answer Content -->
            <div class="faq-content" id="answer-{{ block.id }}" aria-hidden="true">
              <div class="faq-content-inner">
                {{ block.settings.answer }}
              </div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>

  </div>
</section>

<style>
/* Variables */
.faq-premium {
  --primary: #009a61;
  --primary-hover: #00824f;
  --accent: #00d97e;
  --text-dark: #1a1a1a;
  --text-light: #666;
  --bg-white: #ffffff;
  --shadow: 0 10px 30px rgba(0, 0, 0, 0.06);
  --shadow-hover: 0 20px 40px rgba(0, 154, 97, 0.12);
  --radius: 16px;
  --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Dark Mode */
[data-theme="dark"] .faq-premium {
  --text-dark: #ffffff;
  --text-light: #a0a0a0;
  --bg-white: rgba(255, 255, 255, 0.03);
  --shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  --shadow-hover: 0 20px 40px rgba(0, 217, 126, 0.15);
}

/* Section */
.faq-premium {
  padding: 100px 0;
  background: linear-gradient(180deg, #ffffff 0%, #f8fffe 100%);
  position: relative;
  overflow: hidden;
}

[data-theme="dark"] .faq-premium {
  background: linear-gradient(180deg, #040404 0%, #050505 50%, #040404 100%);
}

/* Container */
.faq-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 40px;
}

/* Header */
.faq-header {
  text-align: center;
  margin-bottom: 80px;
}

.faq-title {
  font-size: clamp(42px, 6vw, 72px);
  font-weight: 700;
  line-height: 1.1;
  margin: 0 0 20px;
  letter-spacing: -1px;
}

.title-line1 {
  display: block;
  color: var(--text-dark);
}

.title-line2 {
  display: block;
  background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.faq-subtitle {
  font-size: 20px;
  color: var(--text-light);
  margin: 0;
  font-weight: 400;
}

/* Grid */
.faq-grid {
  display: grid;
  gap: 20px;
  transform-style: preserve-3d;
}

/* FAQ Card */
.faq-card {
  background: var(--bg-white);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  transition: var(--transition);
  transform-style: preserve-3d;
  will-change: transform;
  border: 1px solid rgba(0, 154, 97, 0.08);
}

.faq-card:hover {
  box-shadow: var(--shadow-hover);
  transform: translateY(-2px);
}

.faq-card.active {
  background: linear-gradient(135deg, 
    rgba(0, 154, 97, 0.02) 0%, 
    rgba(0, 217, 126, 0.02) 100%);
  border-color: var(--primary);
}

/* Trigger Button */
.faq-trigger {
  width: 100%;
  padding: 32px;
  background: none;
  border: none;
  cursor: pointer;
  font-family: inherit;
  text-align: left;
  transition: var(--transition);
}

.faq-header-content {
  display: flex;
  align-items: center;
  gap: 24px;
}

/* Index Number */
.faq-index {
  flex-shrink: 0;
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
  color: white;
  font-size: 18px;
  font-weight: 700;
  border-radius: 12px;
  transition: var(--transition);
}

.faq-card.active .faq-index {
  transform: scale(1.1);
  border-radius: 50%;
}

/* Question */
.faq-question {
  flex: 1;
  font-size: 20px;
  font-weight: 600;
  color: var(--text-dark);
  margin: 0;
  line-height: 1.4;
}

/* Toggle Icon */
.faq-toggle {
  position: relative;
  width: 24px;
  height: 24px;
  flex-shrink: 0;
}

.toggle-line {
  position: absolute;
  background: var(--primary);
  border-radius: 2px;
  transition: var(--transition);
}

.toggle-line.horizontal {
  width: 24px;
  height: 2px;
  top: 11px;
  left: 0;
}

.toggle-line.vertical {
  width: 2px;
  height: 24px;
  top: 0;
  left: 11px;
}

.faq-card.active .toggle-line.vertical {
  transform: rotate(90deg);
  opacity: 0;
}

.faq-card.active .toggle-line.horizontal {
  background: var(--accent);
}

/* Content */
.faq-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease-out;
}

.faq-content-inner {
  padding: 0 32px 32px 104px;
  color: var(--text-light);
  font-size: 16px;
  line-height: 1.7;
}

.faq-content-inner p {
  margin: 0 0 12px;
}

.faq-content-inner p:last-child {
  margin: 0;
}

.faq-content-inner strong {
  color: var(--text-dark);
  font-weight: 600;
}

/* Mobile Styles */
@media (max-width: 768px) {
  .faq-premium {
    padding: 60px 0;
  }
  
  .faq-container {
    padding: 0 20px;
  }
  
  .faq-header {
    margin-bottom: 40px;
  }
  
  .faq-title {
    font-size: 36px;
    letter-spacing: -0.5px;
  }
  
  .faq-subtitle {
    font-size: 16px;
  }
  
  .faq-grid {
    gap: 16px;
  }
  
  .faq-trigger {
    padding: 20px;
  }
  
  .faq-header-content {
    gap: 16px;
  }
  
  .faq-index {
    width: 36px;
    height: 36px;
    font-size: 14px;
  }
  
  .faq-question {
    font-size: 16px;
  }
  
  .faq-content-inner {
    padding: 0 20px 20px 68px;
    font-size: 14px;
  }
}

/* Animations */
@media (prefers-reduced-motion: no-preference) {
  .faq-card {
    opacity: 0;
    transform: translateY(30px);
    animation: fadeInUp 0.5s ease-out forwards;
  }
  
  .faq-card:nth-child(1) { animation-delay: 0.1s; }
  .faq-card:nth-child(2) { animation-delay: 0.15s; }
  .faq-card:nth-child(3) { animation-delay: 0.2s; }
  .faq-card:nth-child(4) { animation-delay: 0.25s; }
  .faq-card:nth-child(5) { animation-delay: 0.3s; }
  .faq-card:nth-child(6) { animation-delay: 0.35s; }
  .faq-card:nth-child(7) { animation-delay: 0.4s; }
  .faq-card:nth-child(8) { animation-delay: 0.45s; }
  .faq-card:nth-child(n+9) { animation-delay: 0.5s; }
}

@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
</style>

<script>
// Vanilla Tilt Integration
(function() {
  'use strict';
  
  // Load Vanilla Tilt if not already loaded
  if (typeof VanillaTilt === 'undefined') {
    const script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/npm/vanilla-tilt@1.8.0/dist/vanilla-tilt.min.js';
    script.onload = initFAQ;
    document.head.appendChild(script);
  } else {
    initFAQ();
  }
  
  function initFAQ() {
    const section = document.querySelector('#faq-{{ section.id }}');
    if (!section) return;
    
    const cards = section.querySelectorAll('.faq-card');
    const triggers = section.querySelectorAll('.faq-trigger');
    
    // Initialize Vanilla Tilt on desktop
    if (window.innerWidth > 768 && typeof VanillaTilt !== 'undefined') {
      VanillaTilt.init(section.querySelectorAll('[data-tilt]'), {
        max: 3,
        speed: 400,
        perspective: 1000,
        scale: 1.02,
        glare: false,
        'max-glare': 0.2,
        reset: true
      });
    }
    
    // FAQ Toggle
    triggers.forEach(trigger => {
      trigger.addEventListener('click', function() {
        const card = this.closest('.faq-card');
        const content = card.querySelector('.faq-content');
        const contentInner = content.querySelector('.faq-content-inner');
        const isOpen = card.classList.contains('active');
        
        // Close other FAQs
        cards.forEach(otherCard => {
          if (otherCard !== card && otherCard.classList.contains('active')) {
            otherCard.classList.remove('active');
            otherCard.querySelector('.faq-trigger').setAttribute('aria-expanded', 'false');
            otherCard.querySelector('.faq-content').style.maxHeight = '0';
            otherCard.querySelector('.faq-content').setAttribute('aria-hidden', 'true');
          }
        });
        
        // Toggle current FAQ
        if (isOpen) {
          card.classList.remove('active');
          this.setAttribute('aria-expanded', 'false');
          content.style.maxHeight = '0';
          content.setAttribute('aria-hidden', 'true');
        } else {
          card.classList.add('active');
          this.setAttribute('aria-expanded', 'true');
          content.style.maxHeight = contentInner.offsetHeight + 'px';
          content.setAttribute('aria-hidden', 'false');
        }
      });
    });
    
    // Keyboard Navigation
    section.addEventListener('keydown', function(e) {
      if (!e.target.classList.contains('faq-trigger')) return;
      
      const currentCard = e.target.closest('.faq-card');
      const allCards = Array.from(cards);
      const currentIndex = allCards.indexOf(currentCard);
      let targetIndex = currentIndex;
      
      switch(e.key) {
        case 'ArrowDown':
          e.preventDefault();
          targetIndex = currentIndex < allCards.length - 1 ? currentIndex + 1 : 0;
          break;
        case 'ArrowUp':
          e.preventDefault();
          targetIndex = currentIndex > 0 ? currentIndex - 1 : allCards.length - 1;
          break;
        case 'Home':
          e.preventDefault();
          targetIndex = 0;
          break;
        case 'End':
          e.preventDefault();
          targetIndex = allCards.length - 1;
          break;
        default:
          return;
      }
      
      allCards[targetIndex].querySelector('.faq-trigger').focus();
    });
    
    // Recalculate heights on window resize
    let resizeTimer;
    window.addEventListener('resize', function() {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(function() {
        cards.forEach(card => {
          if (card.classList.contains('active')) {
            const content = card.querySelector('.faq-content');
            const contentInner = content.querySelector('.faq-content-inner');
            content.style.maxHeight = contentInner.offsetHeight + 'px';
          }
        });
        
        // Reinit tilt on resize
        if (window.innerWidth > 768 && typeof VanillaTilt !== 'undefined') {
          VanillaTilt.init(section.querySelectorAll('[data-tilt]'));
        }
      }, 250);
    });
  }
})();
</script>

{% schema %}
{
  "name": "FAQ Premium",
  "class": "faq-premium-section",
  "settings": [
    {
      "type": "text",
      "id": "title_line1",
      "label": "Title Line 1",
      "default": "Häufig gestellte"
    },
    {
      "type": "text",
      "id": "title_line2",
      "label": "Title Line 2 (Colored)",
      "default": "Fragen"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Alles was du über Simbye eSIM wissen musst"
    }
  ],
  "blocks": [
    {
      "type": "faq_item",
      "name": "FAQ Item",
      "settings": [
        {
          "type": "text",
          "id": "question",
          "label": "Question",
          "default": "Kann mein Handy eSIM?"
        },
        {
          "type": "richtext",
          "id": "answer",
          "label": "Answer",
          "default": "<p>Die meisten modernen Smartphones ab 2018 unterstützen eSIM-Technologie. Dazu gehören iPhone XS und neuer, Samsung Galaxy S20 und neuer, Google Pixel 3 und neuer. Du kannst die Kompatibilität deines Geräts auf unserer Website überprüfen.</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "FAQ Premium",
      "blocks": [
        {
          "type": "faq_item",
          "settings": {
            "question": "Kann mein Handy eSIM?",
            "answer": "<p><strong>Die meisten modernen Smartphones ab 2018 unterstützen eSIM.</strong> Dazu gehören iPhone XS und neuer, Samsung Galaxy S20 und neuer, Google Pixel 3 und neuer, sowie viele weitere Modelle. Prüfe die Kompatibilität deines Geräts mit unserem Checker.</p>"
          }
        },
        {
          "type": "faq_item",
          "settings": {
            "question": "Wie schnell erhalte ich meine eSIM?",
            "answer": "<p><strong>Sofort nach der Zahlung!</strong> Der QR-Code wird dir innerhalb von 30 Sekunden per E-Mail zugeschickt. Die komplette Installation dauert weniger als 2 Minuten. Kein Versand, keine Wartezeit - direkt loslegen!</p>"
          }
        },
        {
          "type": "faq_item",
          "settings": {
            "question": "Kann ich die eSIM mehrmals verwenden und aufladen?",
            "answer": "<p><strong>Ja, absolut!</strong> Simbye eSIMs sind vollständig wiederaufladbar. Du kannst jederzeit Daten über dein Dashboard nachkaufen. Keine neue eSIM nötig - einfach aufladen wenn du mehr Daten brauchst. Die eSIM bleibt aktiv solange du sie mindestens alle 180 Tage nutzt.</p>"
          }
        },
        {
          "type": "faq_item",
          "settings": {
            "question": "Was passiert wenn mein Datenvolumen aufgebraucht ist?",
            "answer": "<p><strong>Die eSIM stoppt einfach - keine versteckten Kosten!</strong> Du bekommst Benachrichtigungen bei 50%, 80% und 95% Verbrauch. Danach kannst du sofort über unsere App oder Website aufladen und direkt weitersurfen.</p>"
          }
        },
        {
          "type": "faq_item",
          "settings": {
            "question": "Funktioniert die eSIM auch für WhatsApp Anrufe?",
            "answer": "<p><strong>Natürlich!</strong> Unsere eSIMs bieten vollwertiges Internet - perfekt für WhatsApp, FaceTime, Skype, Zoom und alle anderen VoIP-Dienste. Du kannst telefonieren, chatten und Videocalls machen wie gewohnt.</p>"
          }
        },
        {
          "type": "faq_item",
          "settings": {
            "question": "Kann ich mehrere eSIMs gleichzeitig nutzen?",
            "answer": "<p><strong>Ja, die meisten eSIM-Handys unterstützen mehrere Profile.</strong> Du kannst 5-10 verschiedene eSIMs speichern und zwischen ihnen wechseln. Allerdings kann meist nur eine eSIM gleichzeitig für Daten aktiv sein (neben deiner physischen SIM).</p>"
          }
        },
        {
          "type": "faq_item",
          "settings": {
            "question": "Gibt es eine Geschwindigkeitsdrosselung?",
            "answer": "<p><strong>Keine Drosselung - niemals!</strong> Du bekommst volle 4G/5G Geschwindigkeiten bis zu 1 Gbit/s je nach lokalem Netz. Wir arbeiten mit Premium Tier-1 Carriern zusammen. Unlimited Pläne haben keine Fair-Use-Policy.</p>"
          }
        },
        {
          "type": "faq_item",
          "settings": {
            "question": "Wie kann ich meinen Datenverbrauch prüfen?",
            "answer": "<p><strong>Verfolge deinen Verbrauch in Echtzeit über:</strong> 1) Die Einstellungen deines Handys, 2) Unsere Simbye App mit Live-Statistiken, 3) E-Mail Benachrichtigungen bei Meilensteinen, oder 4) Dein Account Dashboard auf unserer Website.</p>"
          }
        },
        {
          "type": "faq_item",
          "settings": {
            "question": "In welchen Ländern funktioniert Simbye eSIM?",
            "answer": "<p><strong>In über 190 Ländern weltweit!</strong> Von Europa über Asien bis Amerika - wir haben dich überall abgedeckt. Egal ob Türkei, USA, Thailand oder Japan. Check unsere komplette Länderliste für alle Details und Preise.</p>"
          }
        },
        {
          "type": "faq_item",
          "settings": {
            "question": "Behalte ich meine normale Nummer?",
            "answer": "<p><strong>Ja, deine Nummer bleibt aktiv!</strong> Die eSIM läuft parallel zu deiner normalen SIM-Karte. Du kannst weiter Anrufe und SMS auf deiner Nummer empfangen, während du mit der eSIM im Internet surfst. Das Beste aus beiden Welten!</p>"
          }
        }
      ]
    }
  ]
}
{% endschema %}