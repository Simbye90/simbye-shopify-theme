<!-- sections/faq.liquid -->
<!-- SIMBYE FAQ - WORKING VERSION -->

<style>
:root {
  --faq-bg: #ffffff;
  --faq-text: #1a1a1a;
  --faq-text-secondary: #666666;
  --faq-primary: #009a61;
  --faq-border: rgba(0, 0, 0, 0.08);
  --faq-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
  --faq-transition: all 0.3s ease;
}

[data-theme="dark"] {
  --faq-bg: #0a0a0a;
  --faq-text: #f5f5f5;
  --faq-text-secondary: #999999;
  --faq-primary: #00d97e;
  --faq-border: rgba(255, 255, 255, 0.08);
  --faq-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.shopify-section:has(.faq-page) {
  display: block !important;
  padding: 0 !important;
  margin: 0 !important;
  grid-template-columns: unset !important;
}

.faq-page {
  width: 100%;
  padding: 60px 0 100px;
  background: var(--faq-bg);
}

.faq-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 40px;
}

.faq-header {
  text-align: center;
  margin-bottom: 60px;
}

.faq-title {
  font-size: 56px;
  font-weight: 700;
  color: var(--faq-text);
  margin: 0 0 16px 0;
  letter-spacing: -0.02em;
}

.faq-subtitle {
  font-size: 18px;
  color: var(--faq-text-secondary);
  margin: 0 0 40px 0;
}

.faq-search {
  position: relative;
  max-width: 600px;
  margin: 0 auto;
}

.faq-search-input {
  width: 100%;
  padding: 16px 50px 16px 20px;
  font-size: 16px;
  border: 2px solid var(--faq-border);
  border-radius: 12px;
  background: var(--faq-bg);
  color: var(--faq-text);
  font-family: inherit;
}

.faq-search-input:focus {
  outline: none;
  border-color: var(--faq-primary);
}

.faq-search-icon {
  position: absolute;
  right: 20px;
  top: 50%;
  transform: translateY(-50%);
  width: 20px;
  height: 20px;
  color: var(--faq-text-secondary);
}

.faq-category {
  margin: 60px 0;
}

.category-title {
  font-size: 32px;
  font-weight: 700;
  color: var(--faq-text);
  margin: 0 0 32px 0;
  padding-bottom: 16px;
  border-bottom: 2px solid var(--faq-border);
}

.faq-items {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.faq-item {
  background: var(--faq-bg);
  border: 2px solid var(--faq-border);
  border-radius: 16px;
  overflow: hidden;
}

.faq-item:hover {
  border-color: var(--faq-primary);
  box-shadow: var(--faq-shadow);
}

.faq-question {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding: 20px 24px;
  background: none;
  border: none;
  text-align: left;
  cursor: pointer;
  font-family: inherit;
}

.faq-question-text {
  font-size: 18px;
  font-weight: 600;
  color: var(--faq-text);
  flex: 1;
}

.faq-icon {
  width: 24px;
  height: 24px;
  color: var(--faq-primary);
  transition: transform 0.3s;
}

.faq-item.active .faq-icon {
  transform: rotate(180deg);
}

.faq-answer {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease;
}

.faq-answer-content {
  padding: 0 24px 24px;
  color: var(--faq-text-secondary);
  font-size: 16px;
  line-height: 1.7;
}

@media (max-width: 768px) {
  .faq-container {
    padding: 0 20px;
  }
  
  .faq-title {
    font-size: 32px;
  }
  
  .category-title {
    font-size: 24px;
  }
  
  .faq-question-text {
    font-size: 16px;
  }
}
</style>

<section class="faq-page">
  <div class="faq-container">
    
    <div class="faq-header">
      <h1 class="faq-title">{{ section.settings.title }}</h1>
      <p class="faq-subtitle">{{ section.settings.subtitle }}</p>
      
      <div class="faq-search">
        <input 
          type="text" 
          class="faq-search-input" 
          id="faq-search"
          placeholder="{{ section.settings.search_placeholder }}"
        >
        <svg class="faq-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"/>
          <path d="m21 21-4.35-4.35"/>
        </svg>
      </div>
    </div>
    
    {% comment %} Group blocks by category {% endcomment %}
    {% assign compatibility_items = section.blocks | where: 'settings.category', 'compatibility' %}
    {% assign purchase_items = section.blocks | where: 'settings.category', 'purchase' %}
    {% assign activation_items = section.blocks | where: 'settings.category', 'activation' %}
    {% assign usage_items = section.blocks | where: 'settings.category', 'usage' %}
    {% assign troubleshooting_items = section.blocks | where: 'settings.category', 'troubleshooting' %}
    
    {% comment %} Compatibility Category {% endcomment %}
    {% if compatibility_items.size > 0 %}
      <div class="faq-category">
        <h2 class="category-title">{{ section.settings.cat_compatibility }}</h2>
        <div class="faq-items">
          {% for block in compatibility_items %}
            <div class="faq-item" {{ block.shopify_attributes }}>
              <button class="faq-question">
                <span class="faq-question-text">{{ block.settings.question }}</span>
                <svg class="faq-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="m6 9 6 6 6-6"/>
                </svg>
              </button>
              <div class="faq-answer">
                <div class="faq-answer-content">{{ block.settings.answer }}</div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    {% endif %}
    
    {% comment %} Purchase Category {% endcomment %}
    {% if purchase_items.size > 0 %}
      <div class="faq-category">
        <h2 class="category-title">{{ section.settings.cat_purchase }}</h2>
        <div class="faq-items">
          {% for block in purchase_items %}
            <div class="faq-item" {{ block.shopify_attributes }}>
              <button class="faq-question">
                <span class="faq-question-text">{{ block.settings.question }}</span>
                <svg class="faq-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="m6 9 6 6 6-6"/>
                </svg>
              </button>
              <div class="faq-answer">
                <div class="faq-answer-content">{{ block.settings.answer }}</div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    {% endif %}
    
    {% comment %} Activation Category {% endcomment %}
    {% if activation_items.size > 0 %}
      <div class="faq-category">
        <h2 class="category-title">{{ section.settings.cat_activation }}</h2>
        <div class="faq-items">
          {% for block in activation_items %}
            <div class="faq-item" {{ block.shopify_attributes }}>
              <button class="faq-question">
                <span class="faq-question-text">{{ block.settings.question }}</span>
                <svg class="faq-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="m6 9 6 6 6-6"/>
                </svg>
              </button>
              <div class="faq-answer">
                <div class="faq-answer-content">{{ block.settings.answer }}</div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    {% endif %}
    
    {% comment %} Usage Category {% endcomment %}
    {% if usage_items.size > 0 %}
      <div class="faq-category">
        <h2 class="category-title">{{ section.settings.cat_usage }}</h2>
        <div class="faq-items">
          {% for block in usage_items %}
            <div class="faq-item" {{ block.shopify_attributes }}>
              <button class="faq-question">
                <span class="faq-question-text">{{ block.settings.question }}</span>
                <svg class="faq-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="m6 9 6 6 6-6"/>
                </svg>
              </button>
              <div class="faq-answer">
                <div class="faq-answer-content">{{ block.settings.answer }}</div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    {% endif %}
    
    {% comment %} Troubleshooting Category {% endcomment %}
    {% if troubleshooting_items.size > 0 %}
      <div class="faq-category">
        <h2 class="category-title">{{ section.settings.cat_troubleshooting }}</h2>
        <div class="faq-items">
          {% for block in troubleshooting_items %}
            <div class="faq-item" {{ block.shopify_attributes }}>
              <button class="faq-question">
                <span class="faq-question-text">{{ block.settings.question }}</span>
                <svg class="faq-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="m6 9 6 6 6-6"/>
                </svg>
              </button>
              <div class="faq-answer">
                <div class="faq-answer-content">{{ block.settings.answer }}</div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    {% endif %}
    
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const items = document.querySelectorAll('.faq-item');
  
  items.forEach(item => {
    const button = item.querySelector('.faq-question');
    const answer = item.querySelector('.faq-answer');
    const content = item.querySelector('.faq-answer-content');
    
    button.addEventListener('click', function() {
      const isActive = item.classList.contains('active');
      
      if (isActive) {
        item.classList.remove('active');
        answer.style.maxHeight = '0';
      } else {
        item.classList.add('active');
        answer.style.maxHeight = content.scrollHeight + 'px';
      }
    });
  });
});
</script>

{% schema %}
{
  "name": "FAQ Page",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Page Title",
      "default": "Frequently Asked Questions"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Find answers to common questions about our eSIM service"
    },
    {
      "type": "text",
      "id": "search_placeholder",
      "label": "Search Placeholder",
      "default": "Search for answers..."
    },
    {
      "type": "header",
      "content": "Category Names (SEO)"
    },
    {
      "type": "text",
      "id": "cat_compatibility",
      "label": "Category 1: Compatibility",
      "default": "Compatibility & Requirements"
    },
    {
      "type": "text",
      "id": "cat_purchase",
      "label": "Category 2: Purchase",
      "default": "Purchase & Plans"
    },
    {
      "type": "text",
      "id": "cat_activation",
      "label": "Category 3: Activation",
      "default": "Activation & Setup"
    },
    {
      "type": "text",
      "id": "cat_usage",
      "label": "Category 4: Usage",
      "default": "Using Your eSIM"
    },
    {
      "type": "text",
      "id": "cat_troubleshooting",
      "label": "Category 5: Troubleshooting",
      "default": "Troubleshooting"
    }
  ],
  "blocks": [
    {
      "type": "faq_item",
      "name": "FAQ Question",
      "settings": [
        {
          "type": "select",
          "id": "category",
          "label": "Category",
          "options": [
            {"value": "compatibility", "label": "Compatibility"},
            {"value": "purchase", "label": "Purchase"},
            {"value": "activation", "label": "Activation"},
            {"value": "usage", "label": "Usage"},
            {"value": "troubleshooting", "label": "Troubleshooting"}
          ],
          "default": "compatibility"
        },
        {
          "type": "text",
          "id": "question",
          "label": "Question",
          "default": "What is eSIM?"
        },
        {
          "type": "richtext",
          "id": "answer",
          "label": "Answer",
          "default": "<p>An eSIM is a digital SIM card.</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "FAQ Page"
    }
  ]
}
{% endschema %}