<!-- sections/product.liquid -->
<!-- SIMBYE ENTERPRISE PRODUCT PAGE V12.0 FIXED -->

<style>
/* ============================================
   ENTERPRISE PRODUCT PAGE V12 - SIMBYE ESIM
   ALL FIXES APPLIED - PRODUCTION READY
   ============================================ */

/* KILL SHOPIFY GRID COMPLETELY */
.shopify-section:has(.product-enterprise) {
  display: block !important;
  padding: 0 !important;
  margin: 0 !important;
  grid-template-columns: unset !important;
  max-width: 100% !important;
  width: 100% !important;
}

.shopify-section:has(.product-enterprise) > * {
  grid-column: unset !important;
}

.product-enterprise {
  width: 100vw !important;
  margin: 0 !important;
  padding: 0 !important;
  position: relative !important;
  left: 0 !important;
  right: 0 !important;
}

/* CSS Variables */
:root {
  --product-primary: #009a61;
  --product-primary-dark: #00824f;
  --product-accent: #00d97e;
  --product-text: #1a1a1a;
  --product-text-secondary: #666;
  --product-bg: #ffffff;
  --product-card-bg: #ffffff;
  --product-border: rgba(0, 0, 0, 0.06);
  --product-shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.04);
  --product-shadow-md: 0 8px 24px rgba(0, 0, 0, 0.08);
  --product-shadow-lg: 0 16px 48px rgba(0, 154, 97, 0.12);
  --product-radius: 24px;
  --product-radius-sm: 16px;
  --product-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Dark Mode */
[data-theme="dark"] {
  --product-text: #ffffff;
  --product-text-secondary: #a0a0a0;
  --product-bg: #0a0a0a;
  --product-card-bg: rgba(255, 255, 255, 0.03);
  --product-border: rgba(255, 255, 255, 0.08);
  --product-primary: #00d97e;
  --product-primary-dark: #00c571;
  --product-shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.2);
  --product-shadow-md: 0 8px 24px rgba(0, 0, 0, 0.3);
  --product-shadow-lg: 0 16px 48px rgba(0, 217, 126, 0.15);
}

/* Main Section - MEHR ABSTAND ZUM HEADER */
.product-enterprise {
  background: var(--product-bg);
  overflow: hidden;
  padding-top: 120px; /* MEHR ABSTAND */
  min-height: 100vh;
}

[data-theme="dark"] .product-enterprise {
  background: linear-gradient(180deg, #0a0a0a 0%, #0b0b0b 50%, #0a0a0a 100%);
}

/* Hero Section */
.product-hero {
  max-width: 1600px;
  margin: 0 auto;
  padding: 0 40px 80px;
  width: 100%;
}

.hero-container {
  display: grid;
  grid-template-columns: 580px 1fr;
  gap: 80px;
  align-items: center;
}

/* Hero Image - ZWEITES BILD */
.hero-image-section {
  position: relative;
  animation: fadeInLeft 0.8s ease;
}

@keyframes fadeInLeft {
  from { opacity: 0; transform: translateX(-30px); }
  to { opacity: 1; transform: translateX(0); }
}

.hero-image-wrapper {
  position: relative;
  border-radius: var(--product-radius);
  overflow: hidden;
  box-shadow: var(--product-shadow-lg);
  aspect-ratio: 4/3;
  background: var(--product-card-bg);
  border: 3px solid var(--product-primary);
}

.hero-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Hero Info */
.hero-info-section {
  animation: fadeInRight 0.8s ease 0.1s both;
}

@keyframes fadeInRight {
  from { opacity: 0; transform: translateX(30px); }
  to { opacity: 1; transform: translateX(0); }
}

/* Title mit Flagge */
.product-title-wrapper {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 32px;
}

.product-flag {
  width: 56px;
  height: 42px;
  border-radius: 8px;
  object-fit: cover;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  border: 2px solid var(--product-border);
}

.product-title {
  font-size: 48px;
  font-weight: 800;
  line-height: 1.1;
  margin: 0;
  letter-spacing: -0.02em;
}

.country-name {
  color: var(--product-primary);
}

.esim-text {
  color: var(--product-text);
}

[data-theme="dark"] .esim-text {
  color: #ffffff;
}

/* Subtitle */
.hero-subtitle {
  font-size: 18px;
  color: var(--product-text-secondary);
  line-height: 1.6;
  margin-bottom: 32px;
}

/* Features */
.hero-features {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.hero-feature {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 16px;
  color: var(--product-text);
}

.hero-feature svg {
  width: 24px;
  height: 24px;
  color: var(--product-primary);
  flex-shrink: 0;
}

/* Selection Section */
.product-selection {
  max-width: 1600px;
  margin: 0 auto;
  padding: 0 40px 80px;
  width: 100%;
}

/* Tab System */
.variant-tabs {
  display: flex;
  gap: 4px;
  background: var(--product-card-bg);
  padding: 4px;
  border-radius: var(--product-radius-sm);
  border: 1px solid var(--product-border);
  margin-bottom: 32px;
  box-shadow: var(--product-shadow-sm);
}

.variant-tab {
  flex: 1;
  padding: 16px 32px;
  background: transparent;
  border: none;
  border-radius: 12px;
  font-size: 18px;
  font-weight: 600;
  color: var(--product-text-secondary);
  cursor: pointer;
  transition: var(--product-transition);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.variant-tab:hover {
  background: rgba(0, 154, 97, 0.05);
  color: var(--product-text);
}

.variant-tab.active {
  background: var(--product-primary);
  color: white;
  box-shadow: 0 4px 12px rgba(0, 154, 97, 0.25);
}

.tab-icon {
  width: 20px;
  height: 20px;
}

/* Fair Use Notice */
.fair-use-notice {
  display: none;
  background: rgba(0, 154, 97, 0.08);
  border: 1px solid rgba(0, 154, 97, 0.2);
  border-radius: var(--product-radius-sm);
  padding: 20px;
  margin-bottom: 32px;
}

.fair-use-notice.active {
  display: block;
}

.fair-use-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.fair-use-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--product-primary);
  margin: 0;
}

.fair-use-text {
  font-size: 14px;
  color: var(--product-text-secondary);
  line-height: 1.5;
  margin: 0;
}

/* Selection Grid */
.selection-grid {
  display: grid;
  grid-template-columns: 1fr 400px;
  gap: 40px;
  align-items: flex-start;
}

/* FIXED: Plans Container mit 24px Gap */
.plans-container,
.variant-group {
  display: flex;
  flex-direction: column;
  gap: 24px !important; /* FIX: 24px Abstand zwischen Varianten */
}

/* Plan Cards - ALLE GLEICH STYLEN */
.plan-card {
  background: var(--product-card-bg);
  border: 2px solid var(--product-border);
  border-radius: var(--product-radius-sm);
  padding: 24px;
  cursor: pointer;
  transition: var(--product-transition);
  position: relative;
  display: flex;
  justify-content: space-between;
  align-items: center;
  min-height: 80px;
}

.plan-card:hover {
  border-color: rgba(0, 154, 97, 0.3);
  background: rgba(0, 154, 97, 0.02);
  transform: translateY(-2px);
  box-shadow: var(--product-shadow-md);
}

.plan-card.selected {
  border-color: var(--product-primary);
  background: rgba(0, 154, 97, 0.05);
  border-width: 3px; /* Dickere Border für Selected */
  padding: 23px; /* Kompensiere dickere Border */
  box-shadow: 0 0 0 4px rgba(0, 154, 97, 0.1);
}

/* Plan Content */
.plan-content {
  display: flex;
  flex-direction: column;
  flex: 1;
}

.plan-title {
  font-size: 18px;
  font-weight: 700;
  color: var(--product-text);
  margin-bottom: 4px;
}

.plan-validity {
  font-size: 14px;
  color: var(--product-text-secondary);
}

.plan-price {
  font-size: 28px;
  font-weight: 800;
  color: var(--product-primary);
  margin-left: auto;
}

/* FREE Badge */
.free-badge {
  position: absolute;
  top: -10px;
  left: 20px;
  background: var(--product-primary);
  color: white;
  padding: 4px 12px;
  border-radius: 8px;
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.5px;
  box-shadow: 0 4px 8px rgba(0, 154, 97, 0.3);
}

/* POPULAR Badge */
.popular-badge {
  position: absolute;
  top: -10px;
  right: 20px;
  background: #ff6b35;
  color: white;
  padding: 4px 12px;
  border-radius: 8px;
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.5px;
  box-shadow: 0 4px 8px rgba(255, 107, 53, 0.3);
}

/* Login Button für FREE eSIM */
.login-button {
  background: var(--product-primary);
  color: white;
  padding: 10px 20px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 600;
  border: none;
  cursor: pointer;
  transition: var(--product-transition);
}

.login-button:hover {
  background: var(--product-primary-dark);
  transform: scale(1.05);
}

/* Purchase Box */
.purchase-box {
  position: sticky;
  top: 120px;
  background: var(--product-card-bg);
  border: 1px solid var(--product-border);
  border-radius: var(--product-radius);
  padding: 32px;
  box-shadow: var(--product-shadow-md);
}

.purchase-title {
  font-size: 20px;
  font-weight: 700;
  color: var(--product-text);
  margin-bottom: 24px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--product-border);
}

/* Selection Details */
.selection-details {
  display: flex;
  flex-direction: column;
  gap: 16px;
  margin-bottom: 24px;
}

.detail-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 15px;
}

.detail-label {
  color: var(--product-text-secondary);
}

.detail-value {
  font-weight: 600;
  color: var(--product-text);
}

/* Total Price */
.total-section {
  padding: 20px 0;
  border-top: 1px solid var(--product-border);
  margin-bottom: 24px;
}

.total-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.total-label {
  font-size: 18px;
  font-weight: 600;
  color: var(--product-text);
}

.total-price {
  font-size: 32px;
  font-weight: 800;
  color: var(--product-primary);
}

/* Checkout Button */
.checkout-button {
  width: 100%;
  padding: 20px;
  background: linear-gradient(135deg, var(--product-primary) 0%, var(--product-primary-dark) 100%);
  color: white;
  border: none;
  border-radius: 50px;
  font-size: 18px;
  font-weight: 700;
  cursor: pointer;
  transition: var(--product-transition);
  box-shadow: 0 8px 24px rgba(0, 154, 97, 0.25);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  margin-bottom: 24px;
}

.checkout-button:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 12px 32px rgba(0, 154, 97, 0.35);
}

/* Payment Methods */
.payment-methods {
  display: flex;
  justify-content: center;
  gap: 12px;
  padding-top: 24px;
  border-top: 1px solid var(--product-border);
}

.payment-method {
  height: 24px;
  opacity: 0.7;
  transition: var(--product-transition);
}

.payment-method:hover {
  opacity: 1;
  transform: scale(1.05);
}

/* MOBILE STICKY CART */
.sticky-cart {
  display: none;
}

/* MOBILE STYLES */
@media screen and (max-width: 768px) {
  /* Header Abstand Mobile - MIT BLUR HEADER FIX */
  .product-enterprise {
    padding-top: 0;
  }
  
  /* Hero Mobile - SPECIAL STYLE MIT BACKGROUND */
  .product-hero {
    padding: 0 !important;
    max-width: 100% !important;
    position: relative;
    margin-bottom: 32px;
  }
  
  .hero-container {
    grid-template-columns: 1fr;
    gap: 0;
    position: relative;
    min-height: 500px; /* Mindesthöhe für bessere Proportion */
  }
  
  /* Hero Image als Background - DURCHSICHTIG */
  .hero-image-section {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100vw !important;
    height: 100%;
    z-index: 1;
  }
  
  .hero-image-wrapper {
    border-radius: 0 !important;
    border: none !important;
    width: 100vw !important;
    height: 100%;
    margin: 0 !important;
    box-shadow: none !important;
  }
  
  /* VERBESSERTER GRADIENT FÜR BESSERE LESBARKEIT */
  .hero-image-wrapper::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to bottom, 
      rgba(255, 255, 255, 0.5) 0%,    /* Oben weniger durchsichtig */
      rgba(255, 255, 255, 0.75) 30%,  /* Header-Bereich geschützt */
      rgba(255, 255, 255, 0.85) 60%,
      rgba(255, 255, 255, 0.95) 100%);
    z-index: 1;
  }
  
  [data-theme="dark"] .hero-image-wrapper::after {
    background: linear-gradient(to bottom, 
      rgba(10, 10, 10, 0.5) 0%,
      rgba(10, 10, 10, 0.75) 30%,
      rgba(10, 10, 10, 0.85) 60%,
      rgba(10, 10, 10, 0.95) 100%);
  }
  
  .hero-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 1;
  }
  
  /* Hero Info über dem Bild - MIT EXTRA PADDING OBEN */
  .hero-info-section {
    position: relative;
    z-index: 2;
    padding: 80px 20px 40px !important; /* EXTRA PADDING FÜR HEADER */
    text-align: left;
  }
  
  /* Mobile Title mit Kreis-Flagge */
  .product-title-wrapper {
    justify-content: flex-start;
    margin-bottom: 20px;
    align-items: flex-start;
  }
  
  /* FLAGGE ALS KREIS */
  .product-flag {
    width: 48px !important;
    height: 48px !important;
    border-radius: 50% !important;
    border: 3px solid white;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }
  
  .product-title {
    font-size: 32px;
  }
  
  .hero-subtitle {
    font-size: 15px;
    margin-bottom: 24px;
  }
  
  .hero-features {
    gap: 12px;
  }
  
  .hero-feature {
    font-size: 14px;
  }
  
  .hero-feature svg {
    width: 20px;
    height: 20px;
  }
  
  /* Selection Mobile */
  .product-selection {
    padding: 24px 20px 80px;
  }
  
  .selection-grid {
    grid-template-columns: 1fr;
    gap: 0;
  }
  
  /* Variant Tabs Mobile */
  .variant-tabs {
    margin-bottom: 24px;
  }
  
  .variant-tab {
    padding: 12px 8px;
    font-size: 14px;
  }
  
  .tab-icon {
    width: 16px;
    height: 16px;
  }
  
  /* Plans Container Mobile - KEEP GAP */
  .plans-container,
  .variant-group {
    gap: 16px !important; /* Mobile etwas weniger Gap */
  }
  
  /* Plan Cards Mobile */
  .plan-card {
    padding: 20px;
    min-height: 70px;
  }
  
  .plan-card.selected {
    padding: 19px;
  }
  
  .plan-title {
    font-size: 16px;
  }
  
  .plan-validity {
    font-size: 13px;
  }
  
  .plan-price {
    font-size: 22px;
  }
  
  /* Purchase Box Mobile - STICKY */
  .purchase-box {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    top: auto;
    border-radius: 24px 24px 0 0;
    padding: 24px 20px;
    box-shadow: 0 -8px 32px rgba(0, 0, 0, 0.1);
    z-index: 100;
    transform: translateY(100%);
    transition: transform var(--product-transition);
  }
  
  .purchase-box.visible {
    transform: translateY(0);
  }
  
  /* Sticky Cart Mobile */
  .sticky-cart {
    display: block;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--product-bg);
    border-top: 1px solid var(--product-border);
    padding: 12px 20px;
    box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.08);
    z-index: 999;
    transform: translateY(100%);
    transition: transform var(--product-transition);
  }
  
  .sticky-cart.visible {
    transform: translateY(0);
  }
  
  .sticky-cart-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 16px;
  }
  
  .sticky-cart-info {
    flex: 1;
  }
  
  .sticky-cart-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--product-text);
    margin-bottom: 2px;
  }
  
  /* DARK MODE FIX */
  [data-theme="dark"] .sticky-cart-title {
    color: #ffffff !important;
  }
  
  .sticky-cart-price {
    font-size: 18px;
    font-weight: 800;
    color: var(--product-primary);
  }
  
  .sticky-cart-button {
    padding: 12px 24px;
    background: var(--product-primary);
    color: white;
    border: none;
    border-radius: 50px;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
  }
}

/* Dark Mode Specific */
[data-theme="dark"] .plan-card {
  background: rgba(26, 26, 26, 0.6);
  border-color: rgba(255, 255, 255, 0.08);
}

[data-theme="dark"] .plan-card:hover,
[data-theme="dark"] .plan-card.selected {
  background: rgba(26, 26, 26, 0.8);
  border-color: var(--product-primary);
}
</style>

<!-- Product Page HTML -->
<section class="product-enterprise" data-product-id="{{ product.id }}">
  
  <!-- Hero Section -->
  <div class="product-hero">
    <div class="hero-container">
      
      <!-- Hero Image - ZWEITES BILD -->
      <div class="hero-image-section">
        <div class="hero-image-wrapper">
          {% if product.images[1] %}
            {{ product.images[1] | image_url: width: 800 | image_tag: 
               class: 'hero-image',
               loading: 'eager',
               fetchpriority: 'high',
               alt: product.title }}
          {% else %}
            {{ product.featured_image | image_url: width: 800 | image_tag: 
               class: 'hero-image',
               loading: 'eager',
               fetchpriority: 'high',
               alt: product.title }}
          {% endif %}
        </div>
      </div>
      
      <!-- Hero Info -->
      <div class="hero-info-section">
        <!-- Title mit Flagge - ERSTES BILD IST FLAGGE -->
        <div class="product-title-wrapper">
          {% if product.featured_image %}
            {{ product.featured_image | image_url: width: 80 | image_tag: 
               class: 'product-flag',
               alt: product.title }}
          {% else %}
            {% assign country_code = product.handle | split: '-' | first %}
            <img src="https://flagcdn.com/w80/{{ country_code }}.png" 
                 class="product-flag" 
                 alt="{{ product.title }} flag"
                 onerror="this.style.display='none'">
          {% endif %}
          
          <h1 class="product-title">
            {% assign title_parts = product.title | split: ' ' %}
            <span class="country-name">{{ title_parts[0] }}</span>
            <span class="esim-text">eSIM</span>
          </h1>
        </div>
        
        <!-- Subtitle -->
        <p class="hero-subtitle">
          {{ 'product.hero_subtitle' | t: country: product.title | default: 'Prepaid eSIM data plans. Activated in 60 seconds, keep your WhatsApp number, no contract.' }}
        </p>
        
        <!-- Features List -->
        <div class="hero-features">
          <div class="hero-feature">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span>{{ 'product.instant_delivery' | t | default: 'Instant delivery' }}</span>
          </div>
          <div class="hero-feature">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" />
            </svg>
            <span>{{ 'product.premium_network' | t | default: 'Premium 4G/5G network' }}</span>
          </div>
          <div class="hero-feature">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z" />
            </svg>
            <span>{{ 'product.whatsapp_support' | t | default: '24/7 WhatsApp support' }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Product Selection -->
  <div class="product-selection">
    
    <!-- Check for unlimited variants WITH SKU -->
    {% assign has_unlimited = false %}
    {% for variant in product.variants %}
      {% if variant.sku contains 'daily' or variant.sku contains 'Daily' or variant.sku contains 'unlimited' %}
        {% assign has_unlimited = true %}
      {% endif %}
    {% endfor %}
    
    <!-- Tab System - NUR wenn Unlimited existiert -->
    {% if has_unlimited %}
      <div class="variant-tabs">
        <button class="variant-tab active" data-tab="normal">
          <svg class="tab-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125" />
          </svg>
          <span>{{ 'product.data_plans' | t | default: 'Data Plans' }}</span>
        </button>
        <button class="variant-tab" data-tab="unlimited">
          <svg class="tab-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 7c-2.5 0-4 1.5-4 3s1.5 3 4 3c2.5 0 6-5 9-5 2.5 0 4 1.5 4 3s-1.5 3-4 3c-3 0-6.5-5-9-5z" />
          </svg>
          <span>{{ 'product.unlimited_daily' | t | default: 'Unlimited Daily' }}</span>
        </button>
      </div>
      
      <!-- Fair Use Notice -->
      <div class="fair-use-notice" id="fair-use-notice">
        <div class="fair-use-header">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="24" height="24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
          </svg>
          <h3 class="fair-use-title">{{ 'product.fair_use_title' | t | default: 'Fair Use Policy' }}</h3>
        </div>
        <p class="fair-use-text">{{ 'product.fair_use_text' | t | default: '1GB daily at high speed. After 1GB, speed reduced to 128kbps. Data resets daily at midnight.' }}</p>
      </div>
    {% endif %}
    
    <!-- Selection Grid -->
    <div class="selection-grid">
      
      <!-- Plans Container -->
      <div class="plans-container">
        
        <!-- Normal Variants -->
        <div class="variant-group" id="normal-variants" style="display: block;">
          {% assign variant_index = 0 %}
          {% for variant in product.variants %}
            {% unless variant.sku contains 'daily' or variant.sku contains 'Daily' or variant.sku contains 'unlimited' %}
              {% assign variant_index = variant_index | plus: 1 %}
              {% assign is_free = false %}
              {% if variant.price == 0 or variant.title contains '100MB' %}
                {% assign is_free = true %}
              {% endif %}
              
              <div class="plan-card {% if variant_index == 1 and is_free == false %}selected{% endif %}" 
                   data-variant-id="{{ variant.id }}" 
                   data-is-free="{{ is_free }}">
                
                <!-- FREE Badge -->
                {% if is_free %}
                  <span class="free-badge">FREE</span>
                {% endif %}
                
                <!-- POPULAR Badge auf 3. Variante (oder 2. wenn FREE dabei) -->
                {% if is_free == false and variant_index == 2 %}
                  <span class="popular-badge">POPULAR</span>
                {% elsif is_free and variant_index == 3 %}
                  <span class="popular-badge">POPULAR</span>
                {% endif %}
                
                <div class="plan-content">
                  <div class="plan-title">{{ variant.title }}</div>
                  <div class="plan-validity">
                    {% assign days = variant.metafields.custom.validity_days | default: 7 %}
                    {{ 'product.valid_for' | t | default: 'Valid for' }} {{ days }} {{ 'product.days' | t | default: 'days' }}
                  </div>
                </div>
                
                <div class="plan-price">
                  {% if is_free %}
                    FREE
                  {% else %}
                    {{ variant.price | money_without_currency }}
                  {% endif %}
                </div>
                
                <!-- Login Button NUR für FREE -->
                {% if is_free %}
                  <button class="login-button" onclick="openLoginModal()">
                    {{ 'product.login_for_free' | t | default: 'Login for FREE eSIM' }}
                  </button>
                {% endif %}
              </div>
            {% endunless %}
          {% endfor %}
        </div>
        
        <!-- Unlimited Variants -->
        {% if has_unlimited %}
          <div class="variant-group" id="unlimited-variants" style="display: none;">
            {% for variant in product.variants %}
              {% if variant.sku contains 'daily' or variant.sku contains 'Daily' or variant.sku contains 'unlimited' %}
                <div class="plan-card" data-variant-id="{{ variant.id }}">
                  <div class="plan-content">
                    <div class="plan-title">{{ variant.title }}</div>
                    <div class="plan-validity">
                      {% assign days = variant.metafields.custom.validity_days | default: 7 %}
                      {{ 'product.gb_per_day_for' | t: days: days | default: '1GB/day for ' }}{{ days }}{{ ' days' }}
                    </div>
                  </div>
                  <div class="plan-price">{{ variant.price | money_without_currency }}</div>
                </div>
              {% endif %}
            {% endfor %}
          </div>
        {% endif %}
        
      </div>
      
      <!-- Purchase Box -->
      <div class="purchase-box" id="purchase-box">
        <h3 class="purchase-title">{{ 'product.your_selection' | t | default: 'Your Selection' }}</h3>
        
        <!-- Selection Details -->
        <div class="selection-details">
          <div class="detail-row">
            <span class="detail-label">{{ product.title }} eSIM</span>
            <span class="detail-value" id="selected-variant">-</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">{{ 'product.network' | t | default: 'Network' }}</span>
            <span class="detail-value">Avea, Turkcell</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">{{ 'product.activation' | t | default: 'Activation' }}</span>
            <span class="detail-value">{{ 'product.instant' | t | default: 'Instant' }}</span>
          </div>
        </div>
        
        <!-- Total -->
        <div class="total-section">
          <div class="total-row">
            <span class="total-label">{{ 'product.total' | t | default: 'Total' }}</span>
            <span class="total-price" id="total-price">-</span>
          </div>
        </div>
        
        <!-- Checkout Form -->
        <form id="product-form" action="/cart/add" method="post" enctype="multipart/form-data">
          <input type="hidden" name="id" id="variant-input" value="">
          
          <!-- Checkout Button -->
          <button type="submit" class="checkout-button" id="checkout-button" disabled>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" width="20" height="20">
              <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" />
            </svg>
            <span>{{ 'product.buy_now' | t | default: 'Buy Now' }}</span>
          </button>
        </form>
        
        <!-- Payment Methods -->
        <div class="payment-methods">
          <img src="https://cdn.shopify.com/s/files/1/0589/7506/8305/files/visa_1.svg?v=1733502395" class="payment-method" alt="Visa">
          <img src="https://cdn.shopify.com/s/files/1/0589/7506/8305/files/mastercard.svg?v=1733502395" class="payment-method" alt="Mastercard">
          <img src="https://cdn.shopify.com/s/files/1/0589/7506/8305/files/apple-pay-logo.svg?v=1733502396" class="payment-method" alt="Apple Pay">
          <img src="https://cdn.shopify.com/s/files/1/0589/7506/8305/files/google-pay.svg?v=1733502395" class="payment-method" alt="Google Pay">
          <img src="https://cdn.shopify.com/s/files/1/0589/7506/8305/files/paypal.svg?v=1733502395" class="payment-method" alt="PayPal">
        </div>
      </div>
      
    </div>
  </div>
  
  <!-- Sticky Cart (Mobile) -->
  <div class="sticky-cart" id="sticky-cart">
    <div class="sticky-cart-content">
      <div class="sticky-cart-info">
        <div class="sticky-cart-title" id="sticky-title">-</div>
        <div class="sticky-cart-price" id="sticky-price">-</div>
      </div>
      <button class="sticky-cart-button" id="sticky-button">
        {{ 'product.buy_now' | t | default: 'Buy Now' }}
      </button>
    </div>
  </div>
  
</section>

<script>
(function() {
  'use strict';
  
  // Elements
  const section = document.querySelector('.product-enterprise');
  const variantTabs = section.querySelectorAll('.variant-tab');
  const normalGroup = section.querySelector('#normal-variants');
  const unlimitedGroup = section.querySelector('#unlimited-variants');
  const fairUseNotice = section.querySelector('#fair-use-notice');
  const planCards = section.querySelectorAll('.plan-card');
  const variantInput = section.querySelector('#variant-input');
  const selectedVariantText = section.querySelector('#selected-variant');
  const totalPriceText = section.querySelector('#total-price');
  const productForm = section.querySelector('#product-form');
  const checkoutButton = section.querySelector('#checkout-button');
  
  // Sticky Cart
  const stickyCart = document.querySelector('#sticky-cart');
  const stickyTitle = document.querySelector('#sticky-title');
  const stickyPrice = document.querySelector('#sticky-price');
  const stickyButton = document.querySelector('#sticky-button');
  const purchaseBox = document.querySelector('#purchase-box');
  
  // State
  let currentVariant = null;
  
  // Variant Tab Switching
  if (variantTabs.length > 0) {
    variantTabs.forEach(tab => {
      tab.addEventListener('click', function() {
        variantTabs.forEach(t => t.classList.remove('active'));
        this.classList.add('active');
        
        const tabType = this.dataset.tab;
        
        if (tabType === 'unlimited') {
          if (normalGroup) normalGroup.style.display = 'none';
          if (unlimitedGroup) unlimitedGroup.style.display = 'block';
          if (fairUseNotice) fairUseNotice.classList.add('active');
        } else {
          if (normalGroup) normalGroup.style.display = 'block';
          if (unlimitedGroup) unlimitedGroup.style.display = 'none';
          if (fairUseNotice) fairUseNotice.classList.remove('active');
        }
        
        // Select first variant in active group
        const activeGroup = tabType === 'unlimited' ? unlimitedGroup : normalGroup;
        const firstCard = activeGroup.querySelector('.plan-card:not([data-is-free="true"])');
        if (firstCard) firstCard.click();
      });
    });
  }
  
  // Plan Selection
  planCards.forEach(card => {
    card.addEventListener('click', function(e) {
      // Prevent selection if clicking login button
      if (e.target.classList.contains('login-button')) return;
      
      // Skip if FREE variant (needs login)
      if (this.dataset.isFree === 'true') return;
      
      // Update selection
      planCards.forEach(c => c.classList.remove('selected'));
      this.classList.add('selected');
      
      // Get variant data
      const variantId = this.dataset.variantId;
      const title = this.querySelector('.plan-title').textContent;
      const price = this.querySelector('.plan-price').textContent;
      
      // Update form
      variantInput.value = variantId;
      currentVariant = { id: variantId, title: title, price: price };
      
      // Update purchase box
      selectedVariantText.textContent = title;
      totalPriceText.textContent = price;
      checkoutButton.disabled = false;
      
      // Update sticky cart
      if (stickyTitle) stickyTitle.textContent = title;
      if (stickyPrice) stickyPrice.textContent = price;
    });
  });
  
  // Select first non-free variant by default
  const firstNonFree = section.querySelector('.plan-card:not([data-is-free="true"])');
  if (firstNonFree) {
    firstNonFree.click();
  }
  
  // Mobile Sticky Cart Scroll
  if (window.innerWidth <= 768) {
    let lastScroll = 0;
    window.addEventListener('scroll', function() {
      const currentScroll = window.pageYOffset;
      
      if (purchaseBox) {
        const boxRect = purchaseBox.getBoundingClientRect();
        const isBoxVisible = boxRect.top < window.innerHeight && boxRect.bottom > 0;
        
        if (!isBoxVisible && currentScroll > 500) {
          stickyCart.classList.add('visible');
        } else {
          stickyCart.classList.remove('visible');
        }
      }
      
      lastScroll = currentScroll;
    }, { passive: true });
    
    // Sticky button click
    if (stickyButton) {
      stickyButton.addEventListener('click', function() {
        if (currentVariant) {
          productForm.submit();
        }
      });
    }
  }
  
  // Login Modal function (placeholder)
  window.openLoginModal = function() {
    // This would open your login modal
    window.location.href = '/account/login';
  };
  
})();
</script>