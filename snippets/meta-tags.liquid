<!-- ===== CORE META TAGS ===== -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1">

<!-- ===== LANGUAGE & GEO TARGETING ===== -->
<meta name="language" content="{{ request.locale.iso_code }}">
<meta http-equiv="content-language" content="{{ request.locale.iso_code }}">
<meta name="geo.region" content="{{ localization.country.iso_code }}">
<meta name="geo.placename" content="{{ localization.country.name }}">
<meta name="coverage" content="Worldwide">
<meta name="distribution" content="Global">

<!-- ===== ACCESSIBILITY & DEVICE OPTIMIZATION ===== -->
<meta name="applicable-device" content="pc,mobile">
<meta name="MobileOptimized" content="width">
<meta name="HandheldFriendly" content="true">

<!-- ===== TITLE ===== -->
<title>
  {%- if page_title -%}
    {{ page_title | escape }}
  {%- else -%}
    {{ shop.name }}
  {%- endif -%}
  {%- if current_tags %} - {{ current_tags | join: ', ' }}{% endif -%}
  {%- if current_page != 1 %} - Page {{ current_page }}{% endif -%}
</title>

<!-- ===== META DESCRIPTION ===== -->
{% if page_description %}
  <meta name="description" content="{{ page_description | escape }}">
{% endif %}

<!-- ===== CANONICAL URL ===== -->
<link rel="canonical" href="{{ canonical_url }}">

<!-- ===== PAGINATION (for Collections/Blogs with multiple pages) ===== -->
{% if paginate %}
  {% if paginate.previous %}
    <link rel="prev" href="{{ paginate.previous.url }}">
  {% endif %}
  {% if paginate.next %}
    <link rel="next" href="{{ paginate.next.url }}">
  {% endif %}
{% endif %}

<!-- ===== HREFLANG REMOVED - NOW IN theme.liquid ONLY ===== -->
{% comment %}
  ⚠️ IMPORTANT: hreflang tags are now ONLY in layout/theme.liquid to prevent duplicates.
  This prevents Google Search Console warnings and international SEO issues.
  
  Previous code was:
  {% if shop.published_locales.size > 1 %}
    {% assign base_path = request.path | remove_first: request.locale.root_url %}
    {% for locale in shop.published_locales %}
      <link rel="alternate" hreflang="{{ locale.iso_code }}" 
            href="{{ shop.url }}{{ locale.root_url }}{{ base_path }}">
    {% endfor %}
    <link rel="alternate" hreflang="x-default" 
          href="{{ shop.url }}{{ shop.primary_locale.root_url }}{{ base_path }}">
  {% endif %}
  
  ❌ REMOVED to prevent duplicate hreflang tags
{% endcomment %}

<!-- ===== OPEN GRAPH TAGS ===== -->
{%- liquid
  assign og_title = page_title | default: shop.name
  assign og_url = canonical_url | default: request.origin
  assign og_type = 'website'
  assign og_description = page_description | default: shop.description

  if request.page_type == 'product'
    assign og_type = 'product'
  elsif request.page_type == 'article'
    assign og_type = 'article'
  elsif request.page_type == 'password'
    assign og_url = request.origin
  endif
-%}

<meta property="og:site_name" content="{{ shop.name }}">
<meta property="og:url" content="{{ og_url }}">
<meta property="og:title" content="{{ og_title | escape }}">
<meta property="og:type" content="{{ og_type }}">
<meta property="og:description" content="{{ og_description | escape }}">
<meta property="og:locale" content="{{ request.locale.iso_code | replace: '-', '_' }}">

<!-- RTL Support for Arabic -->
{% if request.locale.iso_code == 'ar' %}
  <meta property="og:locale:direction" content="rtl">
{% endif %}

{% if localization.available_languages.size > 1 %}
  {% for language in localization.available_languages %}
    {% unless language.iso_code == request.locale.iso_code %}
      <meta property="og:locale:alternate" content="{{ language.iso_code | replace: '-', '_' }}">
    {% endunless %}
  {% endfor %}
{% endif %}

{%- if page_image -%}
  <meta property="og:image" content="https:{{ page_image | image_url: width: 1200 }}">
  <meta property="og:image:secure_url" content="https:{{ page_image | image_url: width: 1200 }}">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:type" content="image/jpeg">
  <meta property="og:image:alt" content="{{ og_title | escape }}">
{%- endif -%}

<!-- ===== PRODUCT-SPECIFIC TAGS ===== -->
{%- if request.page_type == 'product' -%}
  <meta property="product:brand" content="{{ product.vendor | default: 'Simbye' | escape }}">
  <meta property="product:availability" content="{% if product.available %}in stock{% else %}out of stock{% endif %}">
  <meta property="product:condition" content="new">
  <meta property="product:price:amount" content="{{ product.price | money_without_currency | strip_html }}">
  <meta property="product:price:currency" content="{{ cart.currency.iso_code }}">
  <meta property="product:category" content="eSIM">
  
  <meta property="og:price:amount" content="{{ product.price | money_without_currency | strip_html }}">
  <meta property="og:price:currency" content="{{ cart.currency.iso_code }}">
  
  <meta name="keywords" content="eSIM {{ product.title | escape }}, mobile data, travel internet, {{ localization.country.name }}, {{ request.locale.iso_code }}">
  
  {% comment %}
    ⚠️ REMOVED: {{ product | structured_data }}
    
    Reason: Custom Product Schema with reviews is in theme.liquid
    Shopify's default structured_data doesn't support custom metafields (rating, rating_count)
    
    Previous code was:
    <script type="application/ld+json">
      {{ product | structured_data }}
    </script>
    
    ❌ REMOVED to prevent duplicate Product Schema and enable custom reviews
  {% endcomment %}
{%- endif -%}

<!-- ===== ARTICLE-SPECIFIC TAGS ===== -->
{%- if request.page_type == 'article' -%}
  <meta property="article:published_time" content="{{ article.published_at | date: '%Y-%m-%dT%H:%M:%S%z' }}">
  <meta property="article:modified_time" content="{{ article.updated_at | date: '%Y-%m-%dT%H:%M:%S%z' }}">
  <meta property="article:author" content="{{ article.author }}">
  <meta property="article:section" content="{{ blog.title }}">
  {% for tag in article.tags %}
    <meta property="article:tag" content="{{ tag }}">
  {% endfor %}
{%- endif -%}

<!-- ===== TWITTER CARDS ===== -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@simbyecom">
<meta name="twitter:title" content="{{ og_title | escape }}">
<meta name="twitter:description" content="{{ og_description | escape }}">
{%- if page_image -%}
  <meta name="twitter:image" content="https:{{ page_image | image_url: width: 1200 }}">
  <meta name="twitter:image:alt" content="{{ og_title | escape }}">
{%- endif -%}

<!-- ===== AI SEARCH ENGINE OPTIMIZATION ===== -->
<meta property="article:publisher" content="Simbye">
<meta name="author" content="Simbye">
<meta name="publisher" content="Simbye">

<!-- ===== ROBOTS REMOVED - NOW IN theme.liquid ONLY ===== -->
{% comment %}
  ⚠️ IMPORTANT: Robots meta tags are now ONLY in layout/theme.liquid with intelligent logic.
  This ensures Cart/Search/Account pages are correctly set to noindex.
  Previous implementation here was always "index, follow" which was wrong.
  
  Previous code was:
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large">
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large">
  
  ❌ REMOVED to prevent duplicate and incorrect robots directives
  ✅ Now handled intelligently in theme.liquid based on page_type
{% endcomment %}

<!-- ===== SOCIAL PROFILES ===== -->
<link rel="me" href="https://twitter.com/simbyecom">
<link rel="me" href="https://www.instagram.com/simbyecom/">
<link rel="me" href="https://www.facebook.com/profile.php?id=61557685794131">